(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{2304:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return r(519)}])},18:function(e,t,r){"use strict";var n=r(6154);t.Z=n.Z.create({baseURL:"http://localhost:8080/api"})},519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(5893),a=r(389),s=r.n(a),o=r(7294),i=r(5675),u=r.n(i),c=r(1519),l=r(6788),h=r(3321),d=r(8703),p=r(5568),_=r(1649),m=r(8599),f=r(9155),g=r(1163);function y(){let e=(0,f.T)(),t=(0,g.useRouter)(),[r,a]=(0,o.useState)(!1),[i,y]=(0,o.useState)(""),[v,x]=(0,o.useState)(""),[j,b]=(0,o.useState)(!1),[w,A]=(0,o.useState)(!1),N=(0,_.v9)(e=>e.AuthReducer.isLoginError),E=(0,_.v9)(e=>e.AuthReducer.user);(0,o.useEffect)(()=>{localStorage.getItem("access_token")?(e((0,m.bc)({username:i,password:v})),t.push("/")):a(!0)},[]),(0,o.useEffect)(()=>{N&&(b(!0),e((0,m.g6)()))},[N]),(0,o.useEffect)(()=>{E&&(A(!0),setTimeout(()=>{A(!1),t.push("/")},2e3))},[E]);let Z=t=>{t.preventDefault(),i&&v?e((0,m.bc)({username:i,password:v})):b(!0)},k=e=>{"clickaway"!==e&&(b(!1),A(!1))};return r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:s().root,children:[(0,n.jsx)("div",{className:s()["sub-root"],children:(0,n.jsx)(u(),{className:s().illustration,src:"/home-illustration.png",alt:"illustration",width:45,height:37,priority:!0})}),(0,n.jsx)("div",{className:s()["sub-root"],children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:s()["mb-10"],children:"PALUGADA"}),(0,n.jsx)("h4",{className:s()["mb-10"],children:"LOREM IPSUM DOLOR SIT AMET"}),(0,n.jsx)(c.Z,{className:s().divider}),(0,n.jsx)(l.Z,{size:"small",type:"text",label:"Username",name:"Username",variant:"outlined",className:"".concat(s().input," ").concat(s()["mb-10"]),onChange:e=>y(e.target.value)}),(0,n.jsx)(l.Z,{size:"small",type:"password",name:"Password",label:"Password",variant:"outlined",className:"".concat(s().input," ").concat(s()["mb-10"]),onChange:e=>x(e.target.value)}),(0,n.jsx)(h.Z,{className:s()["primary-color"],onClick:Z,children:"Login"})]})})]}),(0,n.jsx)(d.Z,{open:j||N,autoHideDuration:2e3,onClose:(e,t)=>k(t),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(p.Z,{onClose:()=>k(""),severity:"error",children:"Invalid Username/Password!"})}),(0,n.jsx)(d.Z,{open:w,autoHideDuration:2e3,onClose:(e,t)=>k(t),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(p.Z,{onClose:()=>k(""),severity:"success",children:"Welcome! Redirecting..."})})]}):(0,n.jsx)(n.Fragment,{})}},8599:function(e,t,r){"use strict";r.d(t,{$j:function(){return s},AW:function(){return o},g6:function(){return i},bc:function(){return a},lK:function(){return u}});var n=r(18);let a=e=>async t=>{try{let{data:r}=await n.Z.post("/login",{external_id:e.username,password:e.password});r&&(t({type:"auth/login",payload:r.user}),function(e){for(let t in e)localStorage.setItem(t,e[t])}({access_token:r.token}),t(s()))}catch(e){return t({type:"auth/loginError"}),e}},s=()=>async e=>{let t=localStorage.getItem("access_token"),{data:r}=await n.Z.get("/features",{headers:{Authorization:"Bearer "+t}});r&&e({type:"auth/features",payload:r.features})},o=()=>async e=>{let t=localStorage.getItem("access_token"),{data:r}=await n.Z.get("/profile",{headers:{Authorization:"Bearer "+t}});r&&e({type:"auth/login",payload:r})};function i(){return e=>{e({type:"auth/turnOffLoginError"})}}function u(){return e=>{e({type:"auth/logout"})}}},389:function(e){e.exports={root:"Auth_root___1L5j","sub-root":"Auth_sub-root__N3XoN",illustration:"Auth_illustration__cFJsC",input:"Auth_input__KUi2x",divider:"Auth_divider__MsOTQ","primary-color":"Auth_primary-color__vyUAL","mb-10":"Auth_mb-10__r2I8G"}}},function(e){e.O(0,[212,208,774,888,179],function(){return e(e.s=2304)}),_N_E=e.O()}]);