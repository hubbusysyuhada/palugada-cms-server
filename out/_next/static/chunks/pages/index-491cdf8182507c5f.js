(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1805)}])},18:function(e,a,t){"use strict";var s=t(6154);a.Z=s.Z.create({baseURL:"http://localhost:8080/api"})},1805:function(e,a,t){"use strict";t.r(a),t.d(a,{__N_SSG:function(){return a1},default:function(){return a5}});var s=t(5893),n=t(7294),l=t(5675),i=t.n(l),r=t(74),c=t.n(r),d=t(1649);function o(e){let a=(0,d.v9)(e=>e.GlobalContextReducer.isLoading);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"".concat(c().loading," ").concat(a?"":c().hide),children:(0,s.jsx)(i(),{className:c().illustration,src:"/loading-spinner.svg",alt:"illustration",width:75,height:75,priority:!0})}),e.children]})}var h=t(123),u=t(1163),m=t(4341),x=t.n(m),p=t(3321),g=t(8409),j=t(4666),f=t(7645),v=t(6514),Z=t(1903),b=t(1425),N=t(8703),y=t(1737),w=t(8599),_=t(5143),S=t(6455),k=t.n(S),C=async e=>{let{action:a,text:t,title:s,icon:n,hideDenyButton:l,html:i}=e,r={icon:n,text:t,title:s,html:i,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}};l||(r.showDenyButton=!0,r.confirmButtonText="YES",r.denyButtonText="NO");let{isConfirmed:c}=await k().fire(r);c&&a&&a()};let A={style:{fontSize:"16px"},disableUnderline:!0};function P(){let e=(0,d.v9)(e=>e.AuthReducer.features),a=(0,d.v9)(e=>e.AuthReducer.user),t=(0,d.v9)(e=>e.AuthReducer.isChangePasswordError),l=(0,d.v9)(e=>e.AuthReducer.isChangePasswordSuccess),r=(0,d.v9)(e=>e.GlobalContextReducer.routeName),c=(0,h.T)(),o=(0,u.useRouter)(),m=o.pathname,[S,k]=(0,n.useState)({current:"",new:"",confirm:""}),[P,I]=(0,n.useState)(!1),[R,T]=(0,n.useState)(!1),[z,B]=(0,n.useState)(0),[E,O]=(0,n.useState)(!1),[W,K]=(0,n.useState)([]),D=["transactions","catalogs","categories","sub_categories","items","racks","suppliers","supplies","employees","roles","user"],U={transactions:"transaksi",catalogs:"katalog",categories:"kategori",sub_categories:"sub kategori",items:"barang",racks:"rak",suppliers:"supplier",supplies:"supply barang",employees:"karyawan",roles:"roles",user:"user"};async function M(e){e.preventDefault(),C({icon:"question",text:"ARE YOU SURE WANT TO LOG OUT AS ".concat(null==a?void 0:a.external_id,"?"),action:()=>{C({icon:"success",text:"LOGGED OUT",hideDenyButton:!0}),c((0,w.lK)()),localStorage.removeItem("access_token"),o.push("/auth")}})}(0,n.useEffect)(()=>{if(e.length>0){let a=D.filter(a=>e.includes(a));K(a),B(a.indexOf(m.split("/")[1]))}},[e]),(0,n.useEffect)(()=>{let{new:e,confirm:a,current:t}=S;t&&e&&a===e?I(!1):I(!0)},[S]);let H=(a,t)=>{t.preventDefault();let s=()=>{let t=D.filter(a=>e.includes(a));O(!1),B(a),c((0,_.L)(t[a]))};if(["create-supply","create-transaction-in","create-transaction-out"].includes(r)){let e=r.includes("supply")?"supply":"transaksi";C({icon:"question",title:"Ingin meninggalkan halaman buat ".concat(e," baru?"),text:"Semua perubahan tidak akan tersimpan",action:s})}else s()},J=e=>{e.preventDefault(),O(!E)},L=()=>{T(!1),k({current:"",new:"",confirm:""}),I(!0)},Y=e=>{e.preventDefault(),L();let t={username:(null==a?void 0:a.external_id)||"",password:S.current,newPassword:S.new};c((0,w.n1)(t))},q=e=>{"clickaway"!==e&&(c({type:"auth/turnOffChangePasswordError"}),c({type:"auth/turnOffChangePasswordSuccess"}))};return(0,s.jsxs)("div",{className:x().root,children:[(0,s.jsx)("div",{className:x()["image-container"],children:(0,s.jsx)(i(),{className:x().illustration,src:"/company-logo.png",alt:"logo",width:50,height:50,priority:!0})}),(0,s.jsx)(g.Z,{orientation:"vertical",variant:"scrollable",value:z,className:x().tabs,TabIndicatorProps:{style:{backgroundColor:"#6A32CB"}},children:(()=>{let e=[];return W.forEach((a,t)=>{e.push((0,s.jsx)(p.Z,{className:x()["button-tab"],onClick:e=>H(t,e),children:(0,s.jsx)("span",{className:x()["primary-color"],style:{marginLeft:"15px"},children:U[a]})}))}),e})()}),(0,s.jsx)("div",{className:x()["account-tab-container"],children:(0,s.jsxs)("div",{className:x()["account-tab"],children:[(0,s.jsx)(p.Z,{className:x()["button-tab"],onClick:e=>J(e),children:(0,s.jsx)("span",{className:x()["primary-color"],style:{marginLeft:"15px"},children:"ACCOUNT"})}),E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:x()["account-setting-btn"],onClick:e=>T(!0),children:(0,s.jsx)("span",{className:x()["primary-color"],style:{marginLeft:"15px"},children:"GANTI PASSWORD"})}),(0,s.jsx)(p.Z,{className:x()["account-setting-btn"],onClick:M,children:(0,s.jsx)("span",{className:x()["primary-color"],style:{marginLeft:"15px"},children:"LOG OUT"})})]}):null]})}),(0,s.jsxs)("h5",{className:"text-center mb-40",children:["SUMBER CAHAYA","â„¢",(0,s.jsx)("br",{})," 2023"]}),(0,s.jsxs)(j.Z,{open:R,onClose:L,"aria-labelledby":"form-dialog-title",style:{width:"500px",margin:"auto",textAlign:"center"},children:[(0,s.jsxs)(f.Z,{id:"form-dialog-title",children:["Change Password for ",null==a?void 0:a.external_id]}),(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Current Password",type:"password",value:S.current,onChange:e=>{k({...S,current:e.target.value})},InputProps:{...A},variant:"standard",fullWidth:!0}),(0,s.jsx)(Z.Z,{margin:"dense",label:"New Password",type:"password",value:S.new,onChange:e=>{k({...S,new:e.target.value})},InputProps:{...A},variant:"standard",fullWidth:!0}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Confirm Password",type:"password",value:S.confirm,onChange:e=>{k({...S,confirm:e.target.value})},InputProps:{...A},variant:"standard",fullWidth:!0})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:Y,color:"primary",disabled:P,children:"Change Password"})})]}),(0,s.jsx)(N.Z,{open:t,autoHideDuration:2e3,onClose:(e,a)=>q(a),anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,s.jsx)(y.Z,{onClose:()=>q(""),severity:"error",children:"Invalid Password!"})}),(0,s.jsx)(N.Z,{open:l,autoHideDuration:2e3,onClose:(e,a)=>q(a),anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,s.jsx)(y.Z,{onClose:()=>q(""),severity:"success",children:"Password Successfully Changed"})})]})}var I=t(2978),R=t.n(I),T=t(18);let z=()=>async e=>{e((0,_.c)(!0));let a=localStorage.getItem("access_token"),{data:t}=await T.Z.get("/roles",{headers:{Authorization:"Bearer "+a}}),{data:s}=await T.Z.get("/route_permissions",{headers:{Authorization:"Bearer "+a}});if(t&&s){let a=[];["transactions","catalogs","categories","sub_categories","items","racks","suppliers","supplies","employees","roles"].map(e=>a.push(s.data.find(a=>a.name===e))),e({type:"rbac/roles",payload:t.data}),e({type:"rbac/permissions",payload:a})}e((0,_.c)(!1))},B=()=>async e=>{let a=localStorage.getItem("access_token"),{data:t}=await T.Z.get("/roles",{headers:{Authorization:"Bearer "+a}});t&&e({type:"rbac/roles",payload:t.data})},E=e=>async a=>{try{let{roleId:a,permissionsId:t,name:s}=e,n=localStorage.getItem("access_token"),{data:l}=await T.Z.put("/roles/".concat(a),{name:s,permissionsId:t},{headers:{Authorization:"Bearer "+n}})}catch(e){K(e)}finally{a(z())}},O=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/roles",{name:e},{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(z())}},W=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.delete("/roles/".concat(e),{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(z())}};function K(e){C({icon:"error",text:e.response.data.code||e.response.data.message||"something went wrong",hideDenyButton:!0})}var D=t(5071),U=t(3946),M=t(5832),H=t(7646),J=t(6761);let L={style:{fontSize:"16px"},disableUnderline:!0};function Y(){let e=(0,d.v9)(e=>e.RBACReducer.allRoles),[a,t]=(0,n.useState)([]),l=(0,d.v9)(e=>e.RBACReducer.allPermissions),[i,r]=(0,n.useState)(""),c=(0,h.T)(),[o,u]=(0,n.useState)("");(0,n.useEffect)(()=>{c(z())},[]),(0,n.useEffect)(()=>{t(e.filter(e=>"owner"!==e.name))},[e]);let m=e=>{let t=a[e].permissions.map(e=>e.id);return l.map((a,n)=>(0,s.jsxs)("div",{className:R()["permission-detail"],children:[(0,s.jsx)("p",{children:a.name.replaceAll("_"," ")}),(0,s.jsx)(D.Z,{checked:t.includes(a.id),color:"success",onChange:t=>f(e,a)})]}))},x=e=>{r(i===e?"":e)},g=()=>{a.map(e=>e.name).includes(o)?C({icon:"error",text:"".concat(o," already existed."),hideDenyButton:!0}):(c(O(o)),u(""))},j=(e,s)=>{let n=JSON.parse(JSON.stringify(a));n[e].name=s,t([...n])},f=(e,s)=>{let n=JSON.parse(JSON.stringify(a)),l=n[e].permissions,i=l.map(e=>e.id);i.includes(s.id)?l.splice(l.map(e=>e.id).indexOf(s.id),1):l.push(s),t([...n]),c(E({name:n[e].name,roleId:n[e].id,permissionsId:l.map(e=>e.id)}))},v=s=>{let{name:n,id:l}=a[s];a.filter(e=>e.name===n).length>1?(C({icon:"error",text:"".concat(n," already existed."),hideDenyButton:!0}),t(e.filter(e=>"owner"!==e.name))):"owner"===n?(C({icon:"error",text:"".concat(n," is prohibited."),hideDenyButton:!0}),t(e.filter(e=>"owner"!==e.name))):c(E({name:n,roleId:l,permissionsId:[]}))},b=async e=>{C({icon:"question",text:"DELETE ROLE ".concat(a[e].name,"?"),action:()=>c(W(a[e].id))})};return(0,s.jsx)("div",{className:R().root,children:(0,s.jsxs)("div",{className:R()["role-container"],children:[a.map((e,a)=>(0,s.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[(0,s.jsxs)("div",{className:R().role,children:[(0,s.jsxs)("div",{className:R()["role-title"],onClick:()=>x(e.id),children:[(0,s.jsx)(Z.Z,{placeholder:"KEY",disabled:!1,value:e.name,variant:"standard",InputProps:{...L,style:{fontSize:"20px"}},onChange:e=>j(a,e.target.value),onBlur:()=>v(a)}),i===e.id?(0,s.jsx)(M.Z,{}):(0,s.jsx)(H.Z,{})]}),(0,s.jsx)("div",{className:"".concat(R().permissions," ").concat(i===e.id?R().show:R().hide),children:m(a)})]}),(0,s.jsx)(U.Z,{size:"small",onClick:()=>b(a),edge:"end",children:(0,s.jsx)(J.Z,{style:{height:"14px",width:"14px"}})})]})),(0,s.jsxs)("div",{className:R()["create-div"],children:[(0,s.jsx)(Z.Z,{className:R()["new-role-name"],value:o,onChange:e=>u(e.target.value),placeholder:"NAME",variant:"standard",InputProps:{...L}}),(0,s.jsx)(p.Z,{size:"small",variant:"outlined",disabled:!o,onClick:g,style:{height:"25px",color:"#08011b",borderColor:"#08011b"},children:"Add Role"})]})]})})}var q=t(629),G=t(2882),F=t(7906),V=t(3184),X=t(3816),Q=t(3252),$=t(295),ee=t(1683),ea=t(431),et=t(8896),es=t(9334),en=t(4054),el=t(3841);let ei=e=>async a=>{a((0,_.c)(!0));let{name:t,roleIds:s,limit:n,offset:l}=e,i="/users?limit=".concat(n||25,"&offset=").concat(l||0);t&&(i+="&username=".concat(t)),(null==s?void 0:s.length)&&(i+="&role_id=".concat(JSON.stringify(s)));let r=localStorage.getItem("access_token"),{data:c}=await T.Z.get(i,{headers:{Authorization:"Bearer "+r}});if(c){var d;a({type:"user/set-users",payload:{users:c,totalRow:(null===(d=c[0])||void 0===d?void 0:d.total_row)||0}})}a((0,_.c)(!1))},er=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/register",e,{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(ei({}))}},ec=(e,a)=>async t=>{try{let t=localStorage.getItem("access_token");await T.Z.post("/change-role/".concat(e),{role:a},{headers:{Authorization:"Bearer "+t}})}catch(e){K(e)}finally{t(ei({}))}};function ed(){return(0,s.jsx)("div",{style:{width:"100%",height:"calc(100vh * (75 / 100))",position:"relative"},children:(0,s.jsx)(i(),{src:"/no-data.png",alt:"no-data",fill:!0,priority:!0,objectFit:"contain"})})}let eo={style:{fontSize:"16px"},disableUnderline:!0};function eh(){let e=(0,d.v9)(e=>e.RBACReducer.allRoles),a=(0,d.v9)(e=>e.UserReducer.users),t=(0,d.v9)(e=>e.UserReducer.totalRow),[l,i]=(0,n.useState)({username:"",password:"",confirmPassword:"",role:""}),[r,c]=(0,n.useState)(!0),[o,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(["No Role Chosen"]),g=(0,n.useRef)([]),[N,y]=(0,n.useState)(),[w,_]=(0,n.useState)(25),[S,k]=(0,n.useState)(0),C=(0,n.useRef)(""),A=(0,h.T)();(0,n.useEffect)(()=>{let{username:e,password:a,confirmPassword:t,role:s}=l;e&&a&&t&&s&&a===t?c(!1):c(!0)},[l]),(0,n.useEffect)(()=>{E(),A(B())},[]),(0,n.useEffect)(()=>{E()},[w,S]);let P=()=>{u(!1),i({username:"",password:"",confirmPassword:"",role:""}),c(!0)},I=e=>{e.preventDefault();let a={external_id:l.username,password:l.password,role_id:l.role};A(er(a)),P()},R=(e,a)=>{A(ec(e,a))},T=a=>{let t=e.find(e=>e.id===a[a.length-1]),s=g.current.indexOf(t.id),n=m.indexOf(t.name),l=[],i=[];i=-1===s?[...g.current,t.id]:g.current.filter((e,a)=>a!==s),l=-1===n?[...m,t.name]:m.filter((e,a)=>a!==n),0!==i.length&&l.includes("No Role Chosen")?l.shift():0===i.length&&l.push("No Role Chosen"),x(l),g.current=i,E()},z=e=>{C.current=e,clearTimeout(N);let a=setTimeout(()=>{E()},1e3);y(a)},E=()=>{let e=S*w;e>=t&&(e=0),A(ei({name:C.current,roleIds:g.current,limit:w,offset:e}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>u(!0),children:"Register Account"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-50",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Name"})}),(0,s.jsx)(Z.Z,{placeholder:"User Name",variant:"outlined",size:"small",fullWidth:!0,value:C.current,onChange:e=>z(e.target.value)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Role"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:m,variant:"outlined",size:"small",onChange:e=>T(e.target.value),fullWidth:!0,multiple:!0,children:e.filter(e=>"owner"!==e.name).map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:g.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})})]}),a.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",children:"Name"}),(0,s.jsx)(Q.Z,{align:"center",children:"Role"})]})}),(0,s.jsx)($.Z,{children:a.filter(e=>"owner"!==e.role.name).map((a,t)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:t+1+S*w}),(0,s.jsx)(Q.Z,{align:"left",children:a.external_id}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(ee.Z,{labelId:"demo-select-small-label",value:a.role.id,label:"Role",variant:"standard",disableUnderline:!0,onChange:e=>R(a.id,e.target.value),fullWidth:!0,children:e.filter(e=>"owner"!==e.name).map(e=>(0,s.jsx)(ea.Z,{value:e.id,selected:a.role===e,children:e.name}))})})]},a.id))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:t,rowsPerPage:w,page:S,onPageChange:(e,a)=>{k(a)},onRowsPerPageChange:e=>{_(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:o,onClose:P,"aria-labelledby":"form-dialog-title",style:{width:"500px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Register New Account"}),(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Username",type:"text",InputProps:{...eo},variant:"standard",value:l.username,onChange:e=>{i({...l,username:e.target.value})},fullWidth:!0}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Password",type:"password",value:l.password,onChange:e=>{i({...l,password:e.target.value})},InputProps:{...eo},variant:"standard",fullWidth:!0}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Confirm Password",type:"password",value:l.confirmPassword,onChange:e=>{i({...l,confirmPassword:e.target.value})},InputProps:{...eo},variant:"standard",fullWidth:!0}),(0,s.jsxs)(en.Z,{size:"medium",fullWidth:!0,variant:"standard",sx:{textAlign:"left"},children:[(0,s.jsx)(el.Z,{id:"demo-select-small-label",children:"Role"}),(0,s.jsx)(ee.Z,{labelId:"demo-select-small-label",value:l.role,label:"Role",onChange:e=>i({...l,role:e.target.value}),children:e.filter(e=>"owner"!==e.name).map(e=>(0,s.jsx)(ea.Z,{value:e.id,children:e.name}))})]})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:I,color:"primary",disabled:r,children:"Add"})})]})]})}var eu=t(1023);let em=e=>async a=>{a((0,_.c)(!0));let{name:t,limit:s,offset:n,isActiveOnly:l}=e,i="/employees?limit=".concat(s||25,"&offset=").concat(n||0);t&&(i+="&name=".concat(t)),l&&(i+="&is_active=true");let r=localStorage.getItem("access_token"),{data:c}=await T.Z.get(i,{headers:{Authorization:"Bearer "+r}});if(c){var d;a({type:"employee/set-employees",payload:{employees:c.data,totalRow:(null===(d=c.data[0])||void 0===d?void 0:d.total_row)||0}})}a((0,_.c)(!1))},ex=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/employees",e,{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(em({isActiveOnly:!0}))}},ep=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.put("/employees/".concat(e),{is_active:!1},{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(em({isActiveOnly:!0}))}},eg=(e,a)=>async t=>{try{let t=localStorage.getItem("access_token");await T.Z.put("/employees/".concat(e),a,{headers:{Authorization:"Bearer "+t}})}catch(e){K(e)}finally{t(em({isActiveOnly:!0}))}};var ej=t(1797),ef=t(4625);let ev={style:{fontSize:"16px"},disableUnderline:!0};function eZ(){let e=(0,d.v9)(e=>e.EmployeeReducer.employees),a=(0,d.v9)(e=>e.EmployeeReducer.totalRow),[t,l]=(0,n.useState)(""),[i,r]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),[u,m]=(0,n.useState)({id:"",name:"",idKaryawan:"",title:"",is_active:!0}),[x,g]=(0,n.useState)(!0),[N,y]=(0,n.useState)(!0),[w,_]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!1),[A,P]=(0,n.useState)(!1),[I,R]=(0,n.useState)(),[T,z]=(0,n.useState)(25),[B,E]=(0,n.useState)(0),O=(0,n.useRef)(""),W=(0,h.T)();(0,n.useEffect)(()=>{t?y(!1):y(!0)},[t]),(0,n.useEffect)(()=>{let a=e.filter(e=>e.id!==u.id&&e.name===u.name);!a.length&&u.name?_(!1):_(!0),a.length?g(!0):g(!1)},[u]),(0,n.useEffect)(()=>{ee()},[]),(0,n.useEffect)(()=>{ee()},[T,B]);let K=()=>{k(!1),l(""),y(!0)},D=e=>{e.preventDefault(),W(ex({name:t,idKaryawan:i,title:c})),K()},M=async e=>{C({icon:"question",text:"APAKAH KAMU YAKIN INGIN MENONAKTIFKAN ".concat(e.name," SEBAGAI KARYAWAN?"),action:()=>W(ep(e.id))})},H=()=>{P(!1),m({id:"",name:"",idKaryawan:"",title:"",is_active:!1}),_(!0)},J=e=>{m(e),P(!0)},L=e=>{e.preventDefault();let{id:a,name:t,title:s,idKaryawan:n}=u;W(eg(a,{name:t,idKaryawan:n,title:s})),H()},Y=e=>{O.current=e,clearTimeout(I);let a=setTimeout(()=>{ee()},1e3);R(a)},ee=()=>{let e=B*T;e>=a&&(e=0),W(em({name:O.current,limit:T,offset:e,isActiveOnly:!0}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>k(!0),children:"Tambahkan Karyawan"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsx)("div",{className:"filter-group mb-50",children:(0,s.jsx)("div",{className:"width-50",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Nama"})}),(0,s.jsx)(Z.Z,{placeholder:"Nama atau ID Karyawan",variant:"outlined",size:"small",fullWidth:!0,value:O.current,onChange:e=>Y(e.target.value)})]})})}),e.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",children:"ID Karyawan"}),(0,s.jsx)(Q.Z,{align:"left",children:"Posisi"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:"Action"})]})}),(0,s.jsx)($.Z,{children:e.map((e,a)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+B*T}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.idKaryawan}),(0,s.jsx)(Q.Z,{align:"left",children:e.title}),(0,s.jsxs)(Q.Z,{align:"center",width:"20%",children:[(0,s.jsx)(eu.Z,{title:"Edit",children:(0,s.jsx)(U.Z,{onClick:()=>J(e),children:(0,s.jsx)(ej.Z,{fontSize:"small"})})}),(0,s.jsx)(eu.Z,{title:"Nonaktifkan",children:(0,s.jsx)(U.Z,{onClick:()=>M(e),children:(0,s.jsx)(ef.Z,{fontSize:"small"})})})]})]},e.id))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:a,rowsPerPage:T,page:B,onPageChange:(e,a)=>{E(a)},onRowsPerPageChange:e=>{z(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:S,onClose:K,"aria-labelledby":"form-dialog-title",children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Tambahkan Karyawan"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...ev},variant:"standard",value:t,onChange:e=>l(e.target.value),fullWidth:!0}),(0,s.jsx)(Z.Z,{margin:"dense",label:"ID Karyawan",type:"text",InputProps:{...ev},variant:"standard",value:i,onChange:e=>r(e.target.value),fullWidth:!0}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Posisi Karyawan",type:"text",InputProps:{...ev},variant:"standard",value:c,onChange:e=>o(e.target.value),fullWidth:!0})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:D,color:"primary",disabled:N,children:"Tambahkan"})})]}),(0,s.jsxs)(j.Z,{open:A,onClose:H,children:[(0,s.jsx)(f.Z,{children:"Edit Karyawan"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...ev},variant:"standard",value:u.name,onChange:e=>m({...u,name:e.target.value}),fullWidth:!0,helperText:x?"Nama tidak boleh sama":"",error:x}),(0,s.jsx)(Z.Z,{margin:"dense",label:"ID Karyawan",type:"text",InputProps:{...ev},variant:"standard",value:u.idKaryawan,onChange:e=>m({...u,idKaryawan:e.target.value}),fullWidth:!0,helperText:x?"Nama tidak boleh sama":"",error:x}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Posisi Karyawan",type:"text",InputProps:{...ev},variant:"standard",value:u.title,onChange:e=>m({...u,title:e.target.value}),fullWidth:!0,helperText:x?"Nama tidak boleh sama":"",error:x})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:L,color:"primary",disabled:w,children:"Simpan"})})]})]})}let eb=e=>async a=>{a((0,_.c)(!0));let{name:t,limit:s,offset:n}=e,l="/catalogs?limit=".concat(s||25,"&offset=").concat(n||0);t&&(l+="&name=".concat(t));let i=localStorage.getItem("access_token"),{data:r}=await T.Z.get(l,{headers:{Authorization:"Bearer "+i}});if(r){var c;a({type:"catalog/set-catalogs",payload:{catalogs:r.data,totalRow:(null===(c=r.data[0])||void 0===c?void 0:c.total_row)||0}})}a((0,_.c)(!1))},eN=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/catalogs",{name:e},{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eb({}))}},ey=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.delete("/catalogs/".concat(e),{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eb({}))}},ew=(e,a)=>async t=>{try{let t=localStorage.getItem("access_token");await T.Z.put("/catalogs/".concat(e),{name:a},{headers:{Authorization:"Bearer "+t}})}catch(e){K(e)}finally{t(eb({}))}},e_={style:{fontSize:"16px"},disableUnderline:!0};function eS(){let e=(0,d.v9)(e=>e.CatalogReducer.catalogs),a=(0,d.v9)(e=>e.CatalogReducer.totalRow),[t,l]=(0,n.useState)(""),[i,r]=(0,n.useState)({id:"",name:""}),[c,o]=(0,n.useState)(!0),[u,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!0),[N,y]=(0,n.useState)(!1),[w,_]=(0,n.useState)(!1),[S,k]=(0,n.useState)(),[A,P]=(0,n.useState)(25),[I,R]=(0,n.useState)(0),T=(0,n.useRef)(""),z=(0,h.T)();(0,n.useEffect)(()=>{t?m(!1):m(!0)},[t]),(0,n.useEffect)(()=>{let a=e.filter(e=>e.id!==i.id&&e.name===i.name);!a.length&&i.name?g(!1):g(!0),a.length?o(!0):o(!1)},[i]),(0,n.useEffect)(()=>{H()},[]),(0,n.useEffect)(()=>{H()},[A,I]);let B=()=>{y(!1),l(""),m(!0)},E=e=>{e.preventDefault(),z(eN(t)),B()},O=async e=>{C({icon:"question",text:"APAKAH KAMU YAKIN INGIN MENGHAPUS ".concat(e.name,"?"),action:()=>z(ey(e.id))})},W=()=>{_(!1),r({id:"",name:""}),g(!0)},K=e=>{r(e),_(!0)},D=e=>{e.preventDefault(),z(ew(i.id,i.name)),W()},M=e=>{T.current=e,clearTimeout(S);let a=setTimeout(()=>{H()},1e3);k(a)},H=()=>{let e=I*A;e>=a&&(e=0),z(eb({name:T.current,limit:A,offset:e}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>y(!0),children:"Buat Katalog Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsx)("div",{className:"filter-group mb-50",children:(0,s.jsx)("div",{className:"width-50",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Name"})}),(0,s.jsx)(Z.Z,{placeholder:"Nama Katalog",variant:"outlined",size:"small",fullWidth:!0,value:T.current,onChange:e=>M(e.target.value)})]})})}),e.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:"Action"})]})}),(0,s.jsx)($.Z,{children:e.map((e,a)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+I*A}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsxs)(Q.Z,{align:"center",width:"20%",children:[(0,s.jsx)(eu.Z,{title:"Edit",children:(0,s.jsx)(U.Z,{onClick:()=>K(e),children:(0,s.jsx)(ej.Z,{fontSize:"small"})})}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:()=>O(e),children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]})]},e.id))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:a,rowsPerPage:A,page:I,onPageChange:(e,a)=>{R(a)},onRowsPerPageChange:e=>{P(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:N,onClose:B,"aria-labelledby":"form-dialog-title",children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Buat Katalog Baru"}),(0,s.jsx)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...e_},variant:"standard",value:t,onChange:e=>l(e.target.value),fullWidth:!0})}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:E,color:"primary",disabled:u,children:"Tambahkan"})})]}),(0,s.jsxs)(j.Z,{open:w,onClose:W,children:[(0,s.jsx)(f.Z,{children:"Edit Catalog"}),(0,s.jsx)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...e_},variant:"standard",value:i.name,onChange:e=>r({id:i.id,name:e.target.value}),fullWidth:!0,helperText:c?"Nama tidak boleh sama":"",error:c})}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:D,color:"primary",disabled:x,children:"Simpan"})})]})]})}let ek=e=>async a=>{a((0,_.c)(!0));let{name:t,catalogIds:s,limit:n,offset:l}=e,i="/categories?limit=".concat(n||25,"&offset=").concat(l||0);t&&(i+="&name=".concat(t)),(null==s?void 0:s.length)&&(i+="&catalog_id=".concat(JSON.stringify(s)));let r=localStorage.getItem("access_token"),{data:c}=await T.Z.get(i,{headers:{Authorization:"Bearer "+r}}),{data:d}=await T.Z.get("/categories/all-catalogs",{headers:{Authorization:"Bearer "+r}});if(c&&d){var o;a({type:"category/set-categories",payload:{categories:c.data,totalRow:(null===(o=c.data[0])||void 0===o?void 0:o.total_row)||0}}),a({type:"catalog/set-catalogs",payload:{catalogs:d.data}})}a((0,_.c)(!1))},eC=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/categories",e,{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(ek({}))}},eA=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.delete("/categories/".concat(e),{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(ek({}))}},eP=e=>async a=>{try{let{id:a,name:t,catalog_id:s}=e,n=localStorage.getItem("access_token");await T.Z.put("/categories/".concat(a),{name:t,catalog_id:s},{headers:{Authorization:"Bearer "+n}})}catch(e){K(e)}finally{a(ek({}))}},eI={style:{fontSize:"16px"},disableUnderline:!0};function eR(){var e;let a=(0,d.v9)(e=>e.CatalogReducer.catalogs),t=(0,d.v9)(e=>e.CategoryReducer.totalRow),l=(0,d.v9)(e=>e.CategoryReducer.categories),[i,r]=(0,n.useState)({name:"",catalog_id:""}),[c,o]=(0,n.useState)({id:"",name:"",catalog_id:""}),[u,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!0),[N,y]=(0,n.useState)(!1),[w,_]=(0,n.useState)(!1),[S,k]=(0,n.useState)(),[A,P]=(0,n.useState)(["Pilih Katalog"]),I=(0,n.useRef)(""),R=(0,n.useRef)([]),[T,z]=(0,n.useState)(25),[B,E]=(0,n.useState)(0),O=(0,h.T)();(0,n.useEffect)(()=>{i.name?m(!1):m(!0)},[i]),(0,n.useEffect)(()=>{var e;r({...i,catalog_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""})},[a]),(0,n.useEffect)(()=>{c.name?g(!1):g(!0)},[c]),(0,n.useEffect)(()=>{O(ek({limit:T,offset:B*T}))},[]),(0,n.useEffect)(()=>{ec()},[T,B]);let W=()=>{y(!1),r({name:"",catalog_id:a[0].id}),m(!0)},K=e=>{e.preventDefault(),O(eC(i)),W()},M=async e=>{C({icon:"question",text:"APA KAMU YAKIN INGIN MENGHAPUS ".concat(e.name,"?"),action:()=>O(eA(e.id))})},H=()=>{var e;_(!1),o({id:"",name:"",catalog_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""}),g(!0)},L=e=>{o({...e,catalog_id:e.catalog.id}),_(!0)},Y=e=>{e.preventDefault(),O(eP(c)),H()},ei=e=>{I.current=e,clearTimeout(S);let a=setTimeout(()=>{ec()},1e3);k(a)},er=e=>{let t=a.find(a=>a.id===e[e.length-1]),s=R.current.indexOf(t.id),n=A.indexOf(t.name),l=[],i=[];i=-1===s?[...R.current,t.id]:R.current.filter((e,a)=>a!==s),l=-1===n?[...A,t.name]:A.filter((e,a)=>a!==n),0!==i.length&&l.includes("Pilih Katalog")?l.shift():0===i.length&&l.push("Pilih Katalog"),P(l),R.current=i,ec()},ec=()=>{let e=B*T;e>=t&&(e=0),O(ek({name:I.current,catalogIds:R.current,limit:T,offset:e}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>y(!0),children:"Buat Kategori Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-50",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Name"})}),(0,s.jsx)(Z.Z,{placeholder:"Nama Kategori",variant:"outlined",size:"small",fullWidth:!0,value:I.current,onChange:e=>ei(e.target.value)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Katalog"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:A,variant:"outlined",size:"small",onChange:e=>er(e.target.value),fullWidth:!0,multiple:!0,children:a.map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:R.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})})]}),l.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"40%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",children:"Katalog"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:"Action"})]})}),(0,s.jsx)($.Z,{children:l.map((e,a)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+B*T}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.catalog.name}),(0,s.jsxs)(Q.Z,{align:"center",width:"20%",children:[(0,s.jsx)(eu.Z,{title:"Edit",children:(0,s.jsx)(U.Z,{onClick:()=>L(e),children:(0,s.jsx)(ej.Z,{fontSize:"small"})})}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:()=>M(e),children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]})]},e.id))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:t,rowsPerPage:T,page:B,onPageChange:(e,a)=>{E(a)},onRowsPerPageChange:e=>{z(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:N,onClose:W,"aria-labelledby":"form-dialog-title",children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Buat Kategori Baru"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...eI},variant:"standard",value:i.name,onChange:e=>r({...i,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsxs)(en.Z,{fullWidth:!0,className:"mb-5 mt-5",variant:"standard",children:[(0,s.jsx)(el.Z,{className:"mb-5 mt-5",children:"Katalog"}),(0,s.jsx)(ee.Z,{style:{textAlign:"left"},value:i.catalog_id||(null===(e=a[0])||void 0===e?void 0:e.id),label:"Katalog",variant:"standard",disableUnderline:!0,onChange:e=>r({...i,catalog_id:e.target.value}),fullWidth:!0,children:a.map((e,a)=>(0,s.jsx)(ea.Z,{value:e.id,children:e.name}))})]})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:K,color:"primary",disabled:u,children:"Tambahkan"})})]}),(0,s.jsxs)(j.Z,{open:w,onClose:H,children:[(0,s.jsx)(f.Z,{children:"Edit Category"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...eI},variant:"standard",value:c.name,onChange:e=>o({...c,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsxs)(en.Z,{fullWidth:!0,className:"mb-5 mt-5",variant:"standard",children:[(0,s.jsx)(el.Z,{className:"mb-5 mt-5",children:"Katalog"}),(0,s.jsx)(ee.Z,{style:{textAlign:"left"},value:c.catalog_id,label:"Katalog",variant:"standard",disableUnderline:!0,onChange:e=>o({...c,catalog_id:e.target.value}),fullWidth:!0,children:a.map((e,a)=>(0,s.jsx)(ea.Z,{value:e.id,children:e.name}))})]})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:Y,color:"primary",disabled:x,children:"Simpan"})})]})]})}let eT=e=>async a=>{a((0,_.c)(!0));let{name:t,categoryIds:s,catalogIds:n,limit:l,offset:i}=e,r="/sub_categories?limit=".concat(l||25,"&offset=").concat(i||0);t&&(r+="&name=".concat(t)),(null==s?void 0:s.length)&&(r+="&category_id=".concat(JSON.stringify(s))),(null==n?void 0:n.length)&&(r+="&catalog_id=".concat(JSON.stringify(n)));let c=localStorage.getItem("access_token"),{data:d}=await T.Z.get(r,{headers:{Authorization:"Bearer "+c}}),{data:o}=await T.Z.get("/sub_categories/all-categories",{headers:{Authorization:"Bearer "+c}}),{data:h}=await T.Z.get("/sub_categories/all-catalogs",{headers:{Authorization:"Bearer "+c}});if(d&&h&&o){var u;a({type:"sub_category/set-sub_categories",payload:{sub_categories:d.data,totalRow:(null===(u=d.data[0])||void 0===u?void 0:u.total_row)||0}}),a({type:"category/set-categories",payload:{categories:o.data}}),a({type:"catalog/set-catalogs",payload:{catalogs:h.data}})}a((0,_.c)(!1))},ez=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/sub_categories",e,{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eT({}))}},eB=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.delete("/sub_categories/".concat(e),{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eT({}))}},eE=e=>async a=>{try{let{id:a,name:t,category_id:s}=e,n=localStorage.getItem("access_token");await T.Z.put("/sub_categories/".concat(a),{name:t,category_id:s},{headers:{Authorization:"Bearer "+n}})}catch(e){K(e)}finally{a(eT({}))}},eO={style:{fontSize:"16px"},disableUnderline:!0};function eW(){var e;let a=(0,d.v9)(e=>e.CatalogReducer.catalogs),t=(0,d.v9)(e=>e.SubCategoryReducer.totalRow),l=(0,d.v9)(e=>e.CategoryReducer.categories),i=(0,d.v9)(e=>e.SubCategoryReducer.sub_categories),[r,c]=(0,n.useState)({name:"",category_id:""}),[o,u]=(0,n.useState)({id:0,name:"",category_id:""}),[m,x]=(0,n.useState)(!0),[g,N]=(0,n.useState)(!0),[y,w]=(0,n.useState)(!1),[_,S]=(0,n.useState)(!1),[k,A]=(0,n.useState)(),[P,I]=(0,n.useState)(["Pilih Kategori"]),R=(0,n.useRef)([]),[T,z]=(0,n.useState)(["Pilih Katalog"]),B=(0,n.useRef)([]),E=(0,n.useRef)(""),[O,W]=(0,n.useState)(25),[K,M]=(0,n.useState)(0),H=(0,h.T)();(0,n.useEffect)(()=>{r.name?x(!1):x(!0)},[r]),(0,n.useEffect)(()=>{var e;c({...r,category_id:(null===(e=l[0])||void 0===e?void 0:e.id)||""})},[l]),(0,n.useEffect)(()=>{o.name?N(!1):N(!0)},[o]),(0,n.useEffect)(()=>{H(eT({limit:O,offset:K*O}))},[]),(0,n.useEffect)(()=>{ep()},[O,K]);let L=()=>{w(!1),c({name:"",category_id:l[0].id}),x(!0)},Y=e=>{e.preventDefault(),H(ez(r)),L()},ei=async e=>{C({icon:"question",text:"APA KAMU YAKIN INGIN MENGHAPUS ".concat(e.name,"?"),action:()=>H(eB(e.id))})},er=()=>{var e;S(!1),u({id:0,name:"",category_id:(null===(e=l[0])||void 0===e?void 0:e.id)||""}),N(!0)},ec=e=>{u({...e,category_id:e.category.id}),S(!0)},eo=e=>{e.preventDefault(),H(eE(o)),er()},eh=e=>{E.current=e,clearTimeout(k);let a=setTimeout(()=>{ep()},1e3);A(a)},em=e=>{let t=a.find(a=>a.id===e[e.length-1]),s=B.current.indexOf(t.id),n=T.indexOf(t.name),l=[],i=[];i=-1===s?[...B.current,t.id]:B.current.filter((e,a)=>a!==s),l=-1===n?[...T,t.name]:T.filter((e,a)=>a!==n),0!==i.length&&l.includes("Pilih Katalog")?l.shift():0===i.length&&l.push("Pilih Katalog"),z(l),B.current=i,ep()},ex=e=>{let a=l.find(a=>a.id===e[e.length-1]),t=R.current.indexOf(a.id),s=P.indexOf(a.name),n=[],i=[];i=-1===t?[...R.current,a.id]:R.current.filter((e,a)=>a!==t),n=-1===s?[...P,a.name]:P.filter((e,a)=>a!==s),0!==i.length&&n.includes("Pilih Kategori")?n.shift():0===i.length&&n.push("Pilih Kategori"),I(n),R.current=i,ep()},ep=()=>{let e=K*O;e>=t&&(e=0),H(eT({name:E.current,catalogIds:B.current,categoryIds:R.current,limit:O,offset:e}))},eg=e=>{var a;return null===(a=l.find(a=>a.id===e))||void 0===a?void 0:a.catalog.name};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>w(!0),children:"Buat Sub Kategori Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Nama"})}),(0,s.jsx)(Z.Z,{placeholder:"Nama Sub Kategori",variant:"outlined",size:"small",fullWidth:!0,value:E.current,onChange:e=>eh(e.target.value)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Katalog"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:T,variant:"outlined",size:"small",onChange:e=>em(e.target.value),fullWidth:!0,multiple:!0,children:a.map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:B.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Kategori"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:P,variant:"outlined",size:"small",onChange:e=>ex(e.target.value),fullWidth:!0,multiple:!0,children:l.map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:R.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})})]}),i.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"30%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",width:"25%",children:"Kategori"}),(0,s.jsx)(Q.Z,{align:"left",width:"25%",children:"Katalog"}),(0,s.jsx)(Q.Z,{align:"center",width:"15%",children:"Action"})]})}),(0,s.jsx)($.Z,{children:i.map((e,a)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",children:a+1+K*O}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.category.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.category.catalog.name}),(0,s.jsxs)(Q.Z,{align:"center",children:[(0,s.jsx)(eu.Z,{title:"Edit",children:(0,s.jsx)(U.Z,{onClick:()=>ec(e),children:(0,s.jsx)(ej.Z,{fontSize:"small"})})}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:()=>ei(e),children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]})]},e.id))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[1,25,50,100],component:"div",count:t,rowsPerPage:O,page:K,onPageChange:(e,a)=>{M(a)},onRowsPerPageChange:e=>{W(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:y,onClose:L,"aria-labelledby":"form-dialog-title",children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Buat Sub Kategori Baru"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...eO},variant:"standard",value:r.name,onChange:e=>c({...r,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Katalog",type:"text",InputProps:{...eO},variant:"standard",value:eg(r.category_id),fullWidth:!0,className:"mb-5 mt-5",disabled:!0}),(0,s.jsxs)(en.Z,{fullWidth:!0,className:"mb-5 mt-5",variant:"standard",children:[(0,s.jsx)(el.Z,{className:"mb-5 mt-5",children:"Kategori"}),(0,s.jsx)(ee.Z,{style:{textAlign:"left"},value:r.category_id||(null===(e=l[0])||void 0===e?void 0:e.id),label:"Kategori",variant:"standard",disableUnderline:!0,onChange:e=>c({...r,category_id:e.target.value}),fullWidth:!0,children:l.map((e,a)=>(0,s.jsx)(ea.Z,{value:e.id,children:e.name}))})]})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:Y,color:"primary",disabled:m,children:"Tambahkan"})})]}),(0,s.jsxs)(j.Z,{open:_,onClose:er,children:[(0,s.jsx)(f.Z,{children:"Edit Sub Category"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...eO},variant:"standard",value:o.name,onChange:e=>u({...o,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Katalog",type:"text",InputProps:{...eO},variant:"standard",value:eg(o.category_id),fullWidth:!0,className:"mb-5 mt-5",disabled:!0}),(0,s.jsxs)(en.Z,{fullWidth:!0,className:"mb-5 mt-5",variant:"standard",children:[(0,s.jsx)(el.Z,{className:"mb-5 mt-5",children:"Kategori"}),(0,s.jsx)(ee.Z,{style:{textAlign:"left"},value:o.category_id,label:"Kategori",variant:"standard",disableUnderline:!0,onChange:e=>u({...o,category_id:e.target.value}),fullWidth:!0,children:l.map((e,a)=>(0,s.jsx)(ea.Z,{value:e.id,children:e.name}))})]})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:eo,color:"primary",disabled:g,children:"Simpan"})})]})]})}let eK=e=>async a=>{a((0,_.c)(!0));let{keywords:t,limit:s,offset:n}=e,l="/racks?limit=".concat(s||25,"&offset=").concat(n||0);t&&(l+="&keywords=".concat(t));let i=localStorage.getItem("access_token"),{data:r}=await T.Z.get(l,{headers:{Authorization:"Bearer "+i}});if(r){var c;a({type:"rack/set-racks",payload:{racks:r.data,totalRow:(null===(c=r.data[0])||void 0===c?void 0:c.total_row)||0}})}a((0,_.c)(!1))},eD=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/racks",e,{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eK({}))}},eU=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.delete("/racks/".concat(e),{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eK({}))}},eM=e=>async a=>{try{let{id:a,name:t,storage_number:s}=e,n=localStorage.getItem("access_token");await T.Z.put("/racks/".concat(a),{name:t,storage_number:s},{headers:{Authorization:"Bearer "+n}})}catch(e){K(e)}finally{a(eK({}))}},eH={style:{fontSize:"16px"},disableUnderline:!0};function eJ(){let e=(0,d.v9)(e=>e.RackReducer.racks),a=(0,d.v9)(e=>e.RackReducer.totalRow),[t,l]=(0,n.useState)({name:"",storage_number:0}),[i,r]=(0,n.useState)({id:"",name:"",storage_number:""}),[c,o]=(0,n.useState)(!0),[u,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!1),[w,_]=(0,n.useState)(),S=(0,n.useRef)(""),[k,A]=(0,n.useState)(25),[P,I]=(0,n.useState)(0),R=(0,h.T)();(0,n.useEffect)(()=>{t?o(!1):o(!0)},[t]),(0,n.useEffect)(()=>{i.name?m(!1):m(!0)},[i]),(0,n.useEffect)(()=>{R(eK({limit:k,offset:P*k}))},[]),(0,n.useEffect)(()=>{D()},[k,P]);let T=()=>{g(!1),l({name:"",storage_number:0}),o(!0)},z=e=>{e.preventDefault(),R(eD(t)),T()},B=async e=>{C({icon:"question",text:"APAKAH KAMU YAKIN INGIN MENGHAPUS RAK ".concat(e.name,"?"),action:()=>R(eU(e.id))})},E=()=>{y(!1),r({id:"",name:"",storage_number:""}),m(!0)},O=e=>{r(e),y(!0)},W=e=>{e.preventDefault(),R(eM(i)),E()},K=e=>{S.current=e,clearTimeout(w);let a=setTimeout(()=>{D()},1e3);_(a)},D=()=>{let e=P*k;e>=a&&(e=0),R(eK({keywords:S.current,limit:k,offset:e}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>g(!0),children:"Buat Rak Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsx)("div",{className:"filter-group mb-50",children:(0,s.jsx)("div",{className:"width-40",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Name"})}),(0,s.jsx)(Z.Z,{placeholder:"Nama Rak atau Nomor Lemari",variant:"outlined",size:"small",fullWidth:!0,value:S.current,onChange:e=>K(e.target.value)})]})})}),e.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"50%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",children:"Nomor Lemari"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:"Action"})]})}),(0,s.jsx)($.Z,{children:e.map((e,a)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+P*k}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.storage_number}),(0,s.jsxs)(Q.Z,{align:"center",width:"20%",children:[(0,s.jsx)(eu.Z,{title:"Edit",children:(0,s.jsx)(U.Z,{onClick:()=>O(e),children:(0,s.jsx)(ej.Z,{fontSize:"small"})})}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:()=>B(e),children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]})]},e.id))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:a,rowsPerPage:k,page:P,onPageChange:(e,a)=>{I(a)},onRowsPerPageChange:e=>{A(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:x,onClose:T,"aria-labelledby":"form-dialog-title",children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Buat Rak Baru"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...eH},variant:"standard",value:t.name,onChange:e=>l({...t,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Nomor Lemari",type:"text",InputProps:{...eH},variant:"standard",value:t.storage_number,onChange:e=>l({...t,storage_number:+e.target.value}),fullWidth:!0,className:"mb-5 mt-5"})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:z,color:"primary",disabled:c,children:"Tambahkan"})})]}),(0,s.jsxs)(j.Z,{open:N,onClose:E,children:[(0,s.jsx)(f.Z,{children:"Edit Rak"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama",type:"text",InputProps:{...eH},variant:"standard",value:i.name,onChange:e=>r({...i,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Nomor Lemari",type:"text",InputProps:{...eH},variant:"standard",value:i.storage_number,onChange:e=>r({...i,storage_number:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:W,color:"primary",disabled:u,children:"Simpan"})})]})]})}var eL=t(7922),eY=t(7357),eq=t(5861),eG=t(8678),eF=t(5578),eV=t(6486),eX=t.n(eV);let eQ=e=>async a=>{a((0,_.c)(!0));let{keywords:t,limit:s,offset:n}=e,l="/suppliers?limit=".concat(s||25,"&offset=").concat(n||0);t&&(l+="&keywords=".concat(t));let i=localStorage.getItem("access_token"),{data:r}=await T.Z.get(l,{headers:{Authorization:"Bearer "+i}});if(r){var c;a({type:"supplier/set-suppliers",payload:{suppliers:r.data,totalRow:(null===(c=r.data[0])||void 0===c?void 0:c.total_row)||0}})}a((0,_.c)(!1))},e$=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.post("/suppliers",e,{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eQ({}))}},e0=e=>async a=>{try{let a=localStorage.getItem("access_token");await T.Z.delete("/suppliers/".concat(e),{headers:{Authorization:"Bearer "+a}})}catch(e){K(e)}finally{a(eQ({}))}},e1=e=>async a=>{try{let a=e.id,t=localStorage.getItem("access_token");await T.Z.put("/suppliers/".concat(a),eX().omit(e,["id","created_at","total_row"]),{headers:{Authorization:"Bearer "+t}})}catch(e){K(e)}finally{a(eQ({}))}},e5={name:"",account_name:"",account_number:"",address:"",bank_name:"",contact_info:"",contact_person:"",notes:""},e2={style:{fontSize:"16px"},disableUnderline:!0};function e3(){let e=(0,d.v9)(e=>e.SupplierReducer.suppliers),a=(0,d.v9)(e=>e.SupplierReducer.totalRow),[t,l]=(0,n.useState)(e5),[i,r]=(0,n.useState)({...e5,id:""}),[c,o]=(0,n.useState)(-1),[u,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!0),[N,y]=(0,n.useState)(!1),[w,_]=(0,n.useState)(!1),[S,k]=(0,n.useState)(),A=(0,n.useRef)(""),[P,I]=(0,n.useState)(0),[R,T]=(0,n.useState)(25),[z,B]=(0,n.useState)(0),E=(0,h.T)();(0,n.useEffect)(()=>{let e=!0;for(let a in t)"address"===a||t[a]||(e=!1);m(!e)},[t]),(0,n.useEffect)(()=>{let e=!0;for(let a in i)"address"===a||"id"===a||i[a]||(e=!1);g(!e)},[i]),(0,n.useEffect)(()=>{E(eQ({limit:R,offset:z*R}))},[]),(0,n.useEffect)(()=>{Y()},[R,z]);let O=()=>{y(!1),l(e5),m(!0)},W=e=>{e.preventDefault(),E(e$(t)),O()},K=async e=>{C({icon:"question",text:"ARE YOU SURE WANT TO DELETE ".concat(e.name,"?"),action:()=>E(e0(e.id))})},D=()=>{_(!1),r({...e5,id:""}),g(!0)},M=e=>{r(e),_(!0)},H=e=>{e.preventDefault(),E(e1(i)),D()},L=e=>{A.current=e,clearTimeout(S);let a=setTimeout(()=>{Y()},1e3);k(a)},Y=()=>{let e=z*R;e>=a&&(e=0),E(eQ({keywords:A.current,limit:R,offset:e}))},ee=e=>{c===e?o(-1):o(e)},ea=e=>e===c?(0,s.jsx)(eu.Z,{title:"Tutup",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),ee(e)},children:(0,s.jsx)(eG.Z,{fontSize:"small"})})}):(0,s.jsx)(eu.Z,{title:"Buka",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),ee(e)},children:(0,s.jsx)(eF.Z,{fontSize:"small"})})});return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:()=>y(!0),children:"Buat Supplier Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsx)("div",{className:"filter-group mb-50",children:(0,s.jsx)("div",{className:"width-40",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Kata Kunci"})}),(0,s.jsx)(Z.Z,{placeholder:"Masukkan Kata Kunci",variant:"outlined",size:"small",fullWidth:!0,value:A.current,onChange:e=>L(e.target.value)})]})})}),e.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"30%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",width:"20%",children:"Whatsapp/Email"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:"Action"})]})}),(0,s.jsx)($.Z,{children:e.map((e,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(X.Z,{sx:{"& > *":{borderBottom:"unset !important"}},onMouseOver:()=>I(a+1),onMouseOut:()=>I(0),onClick:()=>{ee(a)},className:P===a+1?"table-row-hover":"",children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+z*R}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.contact_info}),(0,s.jsxs)(Q.Z,{align:"center",children:[(0,s.jsx)(eu.Z,{title:"Edit",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),M(e)},children:(0,s.jsx)(ej.Z,{fontSize:"small"})})}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),K(e)},children:(0,s.jsx)(J.Z,{fontSize:"small"})})}),ea(a)]})]},e.id),(0,s.jsxs)(X.Z,{className:P===a+1?"table-row-hover":"",onMouseOver:()=>I(a+1),onMouseOut:()=>I(0),children:[(0,s.jsx)(Q.Z,{className:"p-0"}),(0,s.jsx)(Q.Z,{align:"left",colSpan:2,className:"p-0",children:(0,s.jsx)(eL.Z,{in:c===a,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(eY.Z,{className:"ml-20",children:[(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nama"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:e.name})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Alamat"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.address})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"PIC"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.contact_person})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Whatsapp/Email"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.contact_info})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nomor Rekening"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.account_number})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nama Rekening"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.account_name})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Bank"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.bank_name})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Keterangan"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-75 ml-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.notes||"-"})})]})]})})}),(0,s.jsx)(Q.Z,{className:"p-0"})]})]}))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:a,rowsPerPage:R,page:z,onPageChange:(e,a)=>{B(a)},onRowsPerPageChange:e=>{T(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]}),(0,s.jsxs)(j.Z,{open:N,onClose:O,"aria-labelledby":"form-dialog-title",children:[(0,s.jsx)(f.Z,{id:"form-dialog-title",children:"Buat Supplier Baru"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama *",type:"text",InputProps:{...e2},variant:"standard",value:t.name,onChange:e=>l({...t,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Alamat",type:"text",InputProps:{...e2},variant:"standard",value:t.address,onChange:e=>l({...t,address:e.target.value}),fullWidth:!0,className:"mb-5 mt-5",multiline:!0,rows:4}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Person In Charge *",type:"text",InputProps:{...e2},variant:"standard",value:t.contact_person,onChange:e=>l({...t,contact_person:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Whatsapp/Email *",type:"text",InputProps:{...e2},variant:"standard",value:t.contact_info,onChange:e=>l({...t,contact_info:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Nomor Rekening *",type:"text",InputProps:{...e2},variant:"standard",value:t.account_number,onChange:e=>l({...t,account_number:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama Rekening *",type:"text",InputProps:{...e2},variant:"standard",value:t.account_name,onChange:e=>l({...t,account_name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Bank *",type:"text",InputProps:{...e2},variant:"standard",value:t.bank_name,onChange:e=>l({...t,bank_name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Keterangan",type:"text",InputProps:{...e2},variant:"standard",value:t.notes,onChange:e=>l({...t,notes:e.target.value}),fullWidth:!0,className:"mb-5 mt-5",multiline:!0,rows:4})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:W,color:"primary",disabled:u,children:"Tambahkan"})})]}),(0,s.jsxs)(j.Z,{open:w,onClose:D,children:[(0,s.jsx)(f.Z,{children:"Edit Supplier"}),(0,s.jsxs)(v.Z,{style:{width:"300px",margin:"auto",textAlign:"center"},children:[(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama *",type:"text",InputProps:{...e2},variant:"standard",value:i.name,onChange:e=>r({...i,name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Alamat",type:"text",InputProps:{...e2},variant:"standard",value:i.address,onChange:e=>r({...i,address:e.target.value}),fullWidth:!0,className:"mb-5 mt-5",multiline:!0,rows:4}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Person In Charge *",type:"text",InputProps:{...e2},variant:"standard",value:i.contact_person,onChange:e=>r({...i,contact_person:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Whatsapp/Email *",type:"text",InputProps:{...e2},variant:"standard",value:i.contact_info,onChange:e=>r({...i,contact_info:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Nomor Rekening *",type:"text",InputProps:{...e2},variant:"standard",value:i.account_number,onChange:e=>r({...i,account_number:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Nama Rekening *",type:"text",InputProps:{...e2},variant:"standard",value:i.account_name,onChange:e=>r({...i,account_name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Bank *",type:"text",InputProps:{...e2},variant:"standard",value:i.bank_name,onChange:e=>r({...i,bank_name:e.target.value}),fullWidth:!0,className:"mb-5 mt-5"}),(0,s.jsx)(Z.Z,{margin:"dense",label:"Keterangan",type:"text",InputProps:{...e2},variant:"standard",value:i.notes,onChange:e=>r({...i,notes:e.target.value}),fullWidth:!0,className:"mb-5 mt-5",multiline:!0,rows:4})]}),(0,s.jsx)(b.Z,{children:(0,s.jsx)(p.Z,{onClick:H,color:"primary",disabled:x,children:"Simpan"})})]})]})}var e8=t(8999),e4=t(6804),e6=t(4784),e9=t(5299);let e7=e=>async a=>{a((0,_.c)(!0));let{keywords:t,limit:s,offset:n,supplierIds:l,paid:i,orderBy:r}=e,c="/supplies?limit=".concat(s||25,"&offset=").concat(n||0);t&&(c+="&keywords=".concat(t)),(null==l?void 0:l.length)&&(c+="&supplier_id=".concat(JSON.stringify(l))),(null==i?void 0:i.length)&&(c+="&paid=".concat(JSON.stringify(i))),(null==r?void 0:r.length)&&(c+="&order_by=".concat(JSON.stringify(r)));let d=localStorage.getItem("access_token"),{data:o}=await T.Z.get(c,{headers:{Authorization:"Bearer "+d}}),{data:h}=await T.Z.get("supplies/all-suppliers",{headers:{Authorization:"Bearer "+d}}),{data:u}=await T.Z.get("supplies/all-racks",{headers:{Authorization:"Bearer "+d}}),{data:m}=await T.Z.get("supplies/all-sub-categories",{headers:{Authorization:"Bearer "+d}});if(o&&h&&u&&m){var x,p,g,j;a({type:"supply/set-supplies",payload:{supplies:o.data,totalRow:(null===(x=o.data[0])||void 0===x?void 0:x.total_row)||0}}),a({type:"supplier/set-suppliers",payload:{suppliers:h.data,totalRow:(null===(p=h.data[0])||void 0===p?void 0:p.total_row)||0}}),a({type:"rack/set-racks",payload:{racks:u.data,totalRow:(null===(g=u.data[0])||void 0===g?void 0:g.total_row)||0}}),a({type:"sub_category/set-sub_categories",payload:{sub_categories:m.data,totalRow:(null===(j=m.data[0])||void 0===j?void 0:j.total_row)||0}})}a((0,_.c)(!1))},ae=e=>async a=>{try{let t=localStorage.getItem("access_token");await T.Z.post("/supplies",e,{headers:{Authorization:"Bearer "+t}}),a((0,_.c)(!0)),a(e7({})),a((0,_.L)("supplies")),a((0,_.c)(!1))}catch(e){K(e)}},aa=e=>async a=>{try{let a=e.id,t=localStorage.getItem("access_token");await T.Z.put("/supplies/".concat(a),eX().omit(e,["id","created_at","total_row"]),{headers:{Authorization:"Bearer "+t}})}catch(e){K(e)}finally{a(e7({}))}};function at(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(a,"0")}function as(){let e=(0,d.v9)(e=>e.SupplyReducer.supplies),a=(0,d.v9)(e=>e.SupplierReducer.suppliers),t=(0,d.v9)(e=>e.SupplyReducer.totalRow),[l,i]=(0,n.useState)(-1),[r,c]=(0,n.useState)(),o=(0,n.useRef)(""),[u,m]=(0,n.useState)(""),[x,g]=(0,n.useState)(0),[j,f]=(0,n.useState)(25),[v,b]=(0,n.useState)(0),[N,y]=(0,n.useState)({}),[w,S]=(0,n.useState)(["Pilih Supplier"]),k=(0,n.useRef)([]),[A,P]=(0,n.useState)(["Tidak Ada Yang Dipilih"]),I=(0,n.useRef)([]),R=(0,h.T)();(0,n.useEffect)(()=>{R(e7({limit:j,offset:v*j}))},[]),(0,n.useEffect)(()=>{let a={};e.forEach(e=>a[e.id]=e.notes||"-"),y(a)},[e]),(0,n.useEffect)(()=>{E()},[j,v]),(0,n.useEffect)(()=>{u?E([["due_date",u]]):E()},[u]);let T=e=>{let t=a.find(a=>a.id===e[e.length-1]),s=k.current.indexOf(t.id),n=w.indexOf(t.name),l=[],i=[];i=-1===s?[...k.current,t.id]:k.current.filter((e,a)=>a!==s),l=-1===n?[...w,t.name]:w.filter((e,a)=>a!==n),0!==i.length&&l.includes("Pilih Supplier")?l.shift():0===i.length&&l.push("Pilih Supplier"),S(l),k.current=i,E()},z=e=>{let a={true:"LUNAS",false:"BELUM LUNAS"},t="true"===e[e.length-1],s=String(t),n=I.current.indexOf(t),l=A.indexOf(a[s]),i=[],r=[];r=-1===n?[...I.current,t]:I.current.filter((e,a)=>a!==n),i=-1===l?[...A,a[s]]:A.filter((e,a)=>a!==l),0!==r.length&&i.includes("Tidak Ada Yang Dipilih")?i.shift():0===r.length&&i.push("Tidak Ada Yang Dipilih"),P(i),I.current=r,E()},B=e=>{o.current=e,clearTimeout(r);let a=setTimeout(()=>{E()},1e3);c(a)},E=e=>{let a=v*j;a>=t&&(a=0),R(e7({keywords:o.current,limit:j,offset:v*j,supplierIds:k.current,paid:I.current,orderBy:e}))},O=e=>{l===e?i(-1):i(e)},W=e=>e===l?(0,s.jsx)(eu.Z,{title:"Tutup",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),O(e)},children:(0,s.jsx)(eG.Z,{fontSize:"small"})})}):(0,s.jsx)(eu.Z,{title:"Buka",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),O(e)},children:(0,s.jsx)(eF.Z,{fontSize:"small"})})}),K=()=>R((0,_.L)("create-supply")),M=e=>{let a=new Date(e),t=a.getDate(),s=a.getMonth(),n=a.getFullYear();return"".concat(at(t),"/").concat(at(s+1),"/").concat(n)},H=(e,a)=>{let t=[(0,s.jsxs)(eq.Z,{variant:"caption",children:[e.unique_id,"0000"]})],n=e.name;return a.description&&(n+=" (".concat(a.description,")")),t.push((0,s.jsx)(eu.Z,{title:n,arrow:!0,sx:{["& .".concat(e8.Z.tooltip)]:{maxWidth:"none"}},children:(0,s.jsx)(e4.Z,{style:{fontSize:"14px",marginLeft:"5px"}})})),(0,s.jsxs)(eY.Z,{className:"d-flex mt-2 align-items-center justify-content-between",width:"100%",children:[(0,s.jsx)(eY.Z,{width:"25%",className:"d-flex align-items-center",children:t}),(0,s.jsxs)(eY.Z,{width:"25%",className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:Y(e.buying_price)}),(0,s.jsx)(eq.Z,{variant:"caption",children:"x"})]}),(0,s.jsx)(eY.Z,{width:"25%",className:"flex-center",children:(0,s.jsxs)(eq.Z,{variant:"caption",children:[e.stock," ",a.unit]})}),(0,s.jsxs)(eY.Z,{width:"25%",className:"d-flex flex-between pr-10",children:[(0,s.jsx)(eq.Z,{variant:"caption",className:"mr-10",children:"="}),(0,s.jsx)(eq.Z,{variant:"caption",children:Y(e.buying_price*e.stock)})]})]})},J=e=>{C({icon:"question",html:"Ubah status pembayaran invoice ".concat(e.invoice_number," menjadi lunas?<br/>Status pembayaran tidak dapat diubah lagi."),action(){R(aa({id:e.id,is_paid:!0}))}})},L=e=>e.is_paid?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"No. Rekening"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.supplier.account_number})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Bank"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.supplier.bank_name})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"PIC"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsxs)(eq.Z,{variant:"caption",children:[e.supplier.contact_info," (",e.supplier.contact_person,")"]})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Catatan Supplier"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.supplier.notes||"-"})})]}),(0,s.jsx)(eY.Z,{className:"d-flex flex-row-reverse",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",sx:{height:"14px"},onClick:()=>J(e),children:(0,s.jsx)(eq.Z,{sx:{fontSize:"8px !important"},children:"Bayar"})})})]}),Y=e=>"Rp. ".concat(e.toLocaleString("id")),en=()=>{switch(u){case"":m("ASC");break;case"ASC":m("DESC");break;case"DESC":m("")}},el=(e,a)=>y({...N,[e]:a}),ei=e=>{let a=N[e];a||y({...N,[e]:"-"}),R(aa({id:e,notes:N[e]}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:K,children:"Buat Supply Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Invoice"})}),(0,s.jsx)(Z.Z,{placeholder:"Masukkan Invoice",variant:"outlined",size:"small",fullWidth:!0,value:o.current,onChange:e=>B(e.target.value)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Supplier"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:w,variant:"outlined",size:"small",onChange:e=>T(e.target.value),fullWidth:!0,multiple:!0,children:a.map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:k.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Status"})}),(0,s.jsxs)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:A,variant:"outlined",size:"small",onChange:e=>z(e.target.value),fullWidth:!0,multiple:!0,children:[(0,s.jsxs)(ea.Z,{value:"true",children:[(0,s.jsx)(D.Z,{size:"small",checked:I.current.includes(!0)}),(0,s.jsx)(es.Z,{primary:"LUNAS"})]}),(0,s.jsxs)(ea.Z,{value:"false",children:[(0,s.jsx)(D.Z,{size:"small",checked:I.current.includes(!1)}),(0,s.jsx)(es.Z,{primary:"BELUM LUNAS"})]})]})]})})]}),e.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"20%",children:"Invoice"}),(0,s.jsx)(Q.Z,{align:"left",width:"25%",children:"Supplier"}),(0,s.jsx)(Q.Z,{align:"center",width:"25%",children:"Status"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:(0,s.jsxs)(eY.Z,{children:["Jatuh Tempo",u?(0,s.jsx)(e9.Z,{className:"btn-sort ".concat("ASC"===u?"up":"down"),onClick:en}):(0,s.jsx)(e6.Z,{className:"btn-sort",onClick:en})]})}),(0,s.jsx)(Q.Z,{align:"center",width:"5%"})]})}),(0,s.jsx)($.Z,{children:e.map((e,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(X.Z,{sx:{"& > *":{borderBottom:"unset !important"}},onMouseOver:()=>g(a+1),onMouseOut:()=>g(0),onClick:()=>{O(a)},className:x===a+1?"table-row-hover":"",children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+v*j}),(0,s.jsx)(Q.Z,{align:"left",children:e.invoice_number}),(0,s.jsx)(Q.Z,{align:"left",children:e.supplier.name}),(0,s.jsx)(Q.Z,{align:"center",children:e.is_paid?"LUNAS":"BELUM LUNAS"}),(0,s.jsx)(Q.Z,{align:"center",children:M(e.due_date)}),(0,s.jsx)(Q.Z,{align:"center",children:W(a)})]},e.id),(0,s.jsxs)(X.Z,{className:x===a+1?"table-row-hover":"",onMouseOver:()=>g(a+1),onMouseOut:()=>g(0),children:[(0,s.jsx)(Q.Z,{className:"p-0"}),(0,s.jsx)(Q.Z,{align:"left",colSpan:4,className:"p-0",children:(0,s.jsx)(eL.Z,{in:l===a,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(eY.Z,{className:"ml-40 mb-15",children:[(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Tanggal Masuk"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:M(e.issued_date)})})]}),(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Barang"})})})})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-column flex-space-between ml-15",children:e.json_data.map((a,t)=>H(a,e.items[t]||a))}),(0,s.jsx)(eY.Z,{className:"d-flex flex-end ml-15 mb-5 mt-5",children:(0,s.jsx)(eY.Z,{sx:{backgroundColor:"black",height:"1px"},width:"75%"})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-end mb-5 mt-5 pr-10",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:Y(e.total_price)})})}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Catatan Transaksi"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},variant:"standard",value:N[e.id],onChange:a=>el(e.id,a.target.value),size:"small",sx:{marginTop:"0px !important"},inputProps:{style:{fontSize:"12px",textAlign:"justify"}},onBlur:a=>ei(e.id),fullWidth:!0,className:"mb-5 mt-5",multiline:!0})})]}),L(e)]})})}),(0,s.jsx)(Q.Z,{className:"p-0"})]})]}))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:t,rowsPerPage:j,page:v,onPageChange:(e,a)=>{b(a)},onRowsPerPageChange:e=>{f(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]})]})}var an=t(7333),al=t(4371),ai=t(3773),ar=t.n(ai),ac=t(509),ad=t(7484),ao=t.n(ad);function ah(e){return e.get("h")>=17&&(e=e.add(1,"days")),["hour","minute","second"].forEach(a=>{e=e.set(a,0)}),e}var au=t(7540);let am=e=>Array.isArray(e)?e.map(e=>ar()[e]||e).join(" "):ar()[e]||e;function ax(){let e=(0,h.T)(),a=(0,d.v9)(e=>e.SupplierReducer.suppliers),t=(0,d.v9)(e=>e.RackReducer.racks),l=(0,d.v9)(e=>e.SubCategoryReducer.sub_categories),[i,r]=(0,n.useState)({supplier_id:"",invoice_number:"",due_date:ah(ao()().add(7,"days")),issued_date:ah(ao()()),is_paid:!1,notes:""}),[c,o]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!1),[j,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{var e;r({...i,supplier_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""})},[a]),(0,n.useEffect)(()=>{let{invoice_number:e,supplier_id:a}=i;g(!!(e&&a))},[i]),(0,n.useEffect)(()=>{m(!x||!j||0===c.length)},[x,j,c.length]);let v=async e=>{let a=JSON.parse(JSON.stringify(e)),t=!0,s=i.issued_date.get("months")+1,n=String(i.issued_date.get("years")),l="".concat(at(s)).concat(n[2]).concat(n[3]),r={},c=e=>{let a=String(e).split(""),t=0,s=[];return a.forEach((e,n)=>{+e||+a[n-1]?s.unshift(e):t++}),s.length<4&&(s.push("0"),e>=1e5&&t++),"".concat(t).concat(s.join(""))};a.forEach(e=>{if(e.sub_category_id){let a=at(e.sub_category_id,3);r[a]||(r[a]=1);let t=at(r[a]);r[a]++;let s=c(e.selling_price);e.unique_id="".concat(a).concat(t).concat(l).concat(s)}else e.unique_id="";e.unique_id&&e.name||(t=!1)}),o(a),f(t)};(0,n.useEffect)(()=>{v(c)},[c.length,i.issued_date]);let b=a=>{a.preventDefault(),C({icon:"question",title:"Ingin meninggalkan halaman buat supply baru?",text:"Semua perubahan tidak akan tersimpan",action:()=>e((0,_.L)("supplies"))})},N=()=>{let{issued_date:a,due_date:t}=i,s={...i,issued_date:"".concat(a.get("years"),"-").concat(a.get("months")+1,"-").concat(a.get("dates")," 00:00:00"),due_date:"".concat(t.get("years"),"-").concat(t.get("months")+1,"-").concat(t.get("dates")," 23:59:59"),items:c};console.log(c),C({action:()=>e(ae(s)),title:"Buat Supply Baru?",text:"Data yang sudah tersimpan tidak dapat diubah.",icon:"question"})},y=()=>{var e,a;o([...c,{unique_id:"",description:"",rack_id:null===(e=t[0])||void 0===e?void 0:e.id,sub_category_id:(null===(a=l[0])||void 0===a?void 0:a.id)||0,selling_price:0,buying_price:0,stock:1,unit:au.v.GALOON,name:""}])},w=e=>{o(c.filter((a,t)=>t!==e))},S=(e,a)=>{let t=JSON.parse(JSON.stringify(c));t[a].sub_category_id=e,v(t)},k=(e,a)=>{let t=JSON.parse(JSON.stringify(c));t[a].rack_id=e,o(t)},A=(e,a)=>{let t=JSON.parse(JSON.stringify(c));t[a].unit=e,o(t)},P=(e,a,t)=>{let s=JSON.parse(JSON.stringify(c));s[t][e]=+a,"selling_price"===e?v(s):o(s)},I=(e,a)=>{if(e.length>500)return;let t=JSON.parse(JSON.stringify(c));t[a].description=e,o(t)},R=(e,a)=>{if(e.length>255)return;let t=JSON.parse(JSON.stringify(c));t[a].name=e,v(t)};return(0,s.jsxs)("div",{className:am("create-supply-container"),children:[(0,s.jsxs)("div",{className:am("title-container"),children:[(0,s.jsxs)("div",{className:am("back-btn"),onClick:b,children:[(0,s.jsx)(al.Z,{}),(0,s.jsx)("p",{children:"BACK"})]}),(0,s.jsx)("div",{})]}),(0,s.jsx)("h2",{children:"Buat Supply Baru"}),(0,s.jsxs)("div",{className:am("content"),children:[(0,s.jsxs)("div",{className:am("form"),children:[(0,s.jsxs)("div",{className:am("form-group"),children:[(0,s.jsx)("h4",{children:"Invoice"}),(0,s.jsx)("div",{className:am("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:i.invoice_number,onChange:e=>r({...i,invoice_number:e.target.value}),placeholder:"Nomor Invoice",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:am("form-group"),children:[(0,s.jsx)("h4",{children:"Supplier"}),(0,s.jsx)("div",{className:am("user-input"),children:(0,s.jsx)(ee.Z,{className:"text-align-left",value:i.supplier_id,variant:"standard",size:"small",onChange:e=>r({...i,supplier_id:e.target.value}),fullWidth:!0,placeholder:"",children:a.map((e,a)=>(0,s.jsx)(ea.Z,{value:e.id,children:e.name}))})})]}),(0,s.jsxs)("div",{className:am("form-group"),children:[(0,s.jsx)("h4",{children:"Tanggal Masuk"}),(0,s.jsx)("div",{className:am("user-input"),children:(0,s.jsx)(ac.M,{format:"DD/MM/YYYY",slotProps:{textField:{variant:"standard"}},value:i.issued_date,onChange:e=>r({...i,issued_date:e}),maxDate:i.due_date})})]}),(0,s.jsxs)("div",{className:am("form-group"),children:[(0,s.jsx)("h4",{children:"Jatuh Tempo"}),(0,s.jsx)("div",{className:am("user-input"),children:(0,s.jsx)(ac.M,{format:"DD/MM/YYYY",slotProps:{textField:{variant:"standard"}},value:i.due_date,onChange:e=>r({...i,due_date:e}),minDate:i.issued_date})})]}),(0,s.jsxs)("div",{className:am(["form-group","multiline"]),children:[(0,s.jsx)("h4",{children:"Catatan"}),(0,s.jsx)("div",{className:am("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:i.notes,onChange:e=>r({...i,notes:e.target.value}),placeholder:"Catatan Transaksi",variant:"standard",fullWidth:!0,multiline:!0,maxRows:4})})]}),(0,s.jsxs)("div",{className:am("form-group"),children:[(0,s.jsx)("h4",{children:"Lunas"}),(0,s.jsx)("div",{className:am("user-input"),children:(0,s.jsx)(D.Z,{onChange:()=>r({...i,is_paid:!i.is_paid}),checked:i.is_paid})})]})]}),(0,s.jsxs)("div",{className:am(["form-barang","mt-25"]),children:[(0,s.jsx)("h4",{children:"Barang"}),(0,s.jsx)("div",{className:am("barang-table-container"),children:(0,s.jsxs)("div",{className:am(["table-container","width-100","mt-10"]),children:[(0,s.jsx)(q.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"15%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",width:"15%",children:"Deskripsi"}),(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"Rak"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:"Sub Kategori"}),(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"Harga Beli"}),(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:"Harga Jual"}),(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"Stok"}),(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"Satuan"}),(0,s.jsx)(Q.Z,{align:"center",width:"5%"})]})}),(0,s.jsx)($.Z,{children:c.map((e,a)=>(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",children:a+1}),(0,s.jsx)(Q.Z,{align:"left",children:(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},variant:"standard",value:e.name,onChange:e=>{R(e.target.value,a)},fullWidth:!0,className:"mb-5 mt-5",multiline:!0,rows:e.name.length>18?2:1})}),(0,s.jsx)(Q.Z,{align:"left",children:(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},variant:"standard",value:e.description,onChange:e=>{I(e.target.value,a)},fullWidth:!0,className:"mb-5 mt-5",multiline:!0,rows:e.description.length>18?2:1})}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(ee.Z,{value:e.rack_id,label:"rack_id",variant:"standard",disableUnderline:!0,onChange:e=>k(e.target.value,a),fullWidth:!0,children:t.map(a=>(0,s.jsx)(ea.Z,{value:a.id,selected:e.rack_id===a.id,children:a.storage_number}))})}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(ee.Z,{value:e.sub_category_id,label:"sub_category_id",variant:"standard",disableUnderline:!0,onChange:e=>S(+e.target.value,a),fullWidth:!0,children:l.map(a=>(0,s.jsx)(ea.Z,{value:a.id,selected:e.sub_category_id==a.id,children:a.name}))})}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(an.h3,{onKeyDown:e=>{"-"===e.key&&e.preventDefault()},className:am("react-number-input"),min:0,size:20,value:e.buying_price,thousandSeparator:".",decimalSeparator:",",onValueChange:e=>P("buying_price",+e.value,a)})}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(an.h3,{onKeyDown:e=>{"-"===e.key&&e.preventDefault()},className:am("react-number-input"),min:0,size:20,value:e.selling_price,thousandSeparator:".",decimalSeparator:",",onValueChange:e=>P("selling_price",+e.value,a)})}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(an.h3,{onKeyDown:e=>{"-"===e.key&&e.preventDefault()},className:am("react-number-input"),min:1,size:20,value:e.stock,thousandSeparator:".",decimalSeparator:",",onValueChange:e=>P("stock",+e.value,a)})}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(ee.Z,{value:e.unit,label:"unit",variant:"standard",disableUnderline:!0,onChange:e=>A(e.target.value,a),fullWidth:!0,children:Object.values(au.v).map(a=>(0,s.jsx)(ea.Z,{value:a,selected:a===e.unit,children:a}))})}),(0,s.jsx)(Q.Z,{align:"left",children:(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:e=>{e.stopPropagation(),w(a)},children:(0,s.jsx)(J.Z,{fontSize:"small"})})})})]}))})]})})}),(0,s.jsx)(p.Z,{variant:"contained",className:am(["global-btn","mt-10","mb-10"]),onClick:y,children:"Tambah Barang Baru"})]})})]})]}),(0,s.jsx)("div",{className:am("submit-btn-container"),children:(0,s.jsx)(p.Z,{variant:"contained",className:am(["global-btn","save-btn"]),onClick:N,disabled:u,children:"Simpan"})})]})}let ap=e=>async a=>{a((0,_.c)(!0));let{keywords:t,limit:s,offset:n,supplierIds:l,subCategoryIds:i,orderBy:r}=e,c="/items?limit=".concat(s||25,"&offset=").concat(n||0);t&&(c+="&keywords=".concat(t)),(null==l?void 0:l.length)&&(c+="&supplier_id=".concat(JSON.stringify(l))),(null==i?void 0:i.length)&&(c+="&sub_category_id=".concat(JSON.stringify(i))),(null==r?void 0:r.length)&&(c+="&order_by=".concat(JSON.stringify(r)));let d=localStorage.getItem("access_token"),{data:o}=await T.Z.get(c,{headers:{Authorization:"Bearer "+d}}),{data:h}=await T.Z.get("items/all-suppliers",{headers:{Authorization:"Bearer "+d}}),{data:u}=await T.Z.get("items/all-sub-categories",{headers:{Authorization:"Bearer "+d}});if(o&&h&&u){var m,x,p;a({type:"item/set-items",payload:{items:o.data,totalRow:(null===(m=o.data[0])||void 0===m?void 0:m.total_row)||0}}),a({type:"supplier/set-suppliers",payload:{suppliers:h.data,totalRow:(null===(x=h.data[0])||void 0===x?void 0:x.total_row)||0}}),a({type:"sub_category/set-sub_categories",payload:{sub_categories:u.data,totalRow:(null===(p=u.data[0])||void 0===p?void 0:p.total_row)||0}})}a((0,_.c)(!1))},ag=e=>async a=>{try{let a=e.id,t=localStorage.getItem("access_token");await T.Z.put("/items/".concat(a),eX().omit(e,["id","created_at","total_row"]),{headers:{Authorization:"Bearer "+t}})}catch(e){K(e)}finally{a(ap({}))}};function aj(){let e=(0,d.v9)(e=>e.ItemReducer.items),a=(0,d.v9)(e=>e.SupplierReducer.suppliers),t=(0,d.v9)(e=>e.SubCategoryReducer.sub_categories),l=(0,d.v9)(e=>e.SupplyReducer.totalRow),[i,r]=(0,n.useState)(-1),[c,o]=(0,n.useState)(),u=(0,n.useRef)(""),[m,x]=(0,n.useState)(""),[g,j]=(0,n.useState)(0),[f,v]=(0,n.useState)(25),[b,N]=(0,n.useState)(0),[y,w]=(0,n.useState)({}),[S,k]=(0,n.useState)(["Pilih Supplier"]),C=(0,n.useRef)([]),[A,P]=(0,n.useState)(["Pilih Sub Kategori"]),I=(0,n.useRef)([]),R=(0,h.T)();(0,n.useEffect)(()=>{R(ap({limit:f,offset:b*f}))},[]),(0,n.useEffect)(()=>{E()},[f,b]),(0,n.useEffect)(()=>{let a={};e.forEach(e=>a[e.id]=e.description||"-"),w(a)},[e]),(0,n.useEffect)(()=>{m?E([["supply.issued_date",m]]):E()},[m]);let T=e=>{let t=a.find(a=>a.id===e[e.length-1]),s=C.current.indexOf(t.id),n=S.indexOf(t.name),l=[],i=[];i=-1===s?[...C.current,t.id]:C.current.filter((e,a)=>a!==s),l=-1===n?[...S,t.name]:S.filter((e,a)=>a!==n),0!==i.length&&l.includes("Pilih Supplier")?l.shift():0===i.length&&l.push("Pilih Supplier"),k(l),C.current=i,E()},z=e=>{let a=t.find(a=>+a.id==+e[e.length-1]),s=I.current.indexOf(a.id),n=A.indexOf(a.name),l=[],i=[];i=-1===s?[...I.current,a.id]:I.current.filter((e,a)=>a!==s),l=-1===n?[...A,a.name]:A.filter((e,a)=>a!==n),0!==i.length&&l.includes("Pilih Sub Kategori")?l.shift():0===i.length&&l.push("Pilih Sub Kategori"),P(l),I.current=i,E()},B=e=>{u.current=e,clearTimeout(c);let a=setTimeout(()=>{E()},1e3);o(a)},E=e=>{let a=b*f;a>=l&&(a=0),R(ap({keywords:u.current,limit:f,offset:b*f,supplierIds:C.current,subCategoryIds:I.current,orderBy:e}))},O=e=>{i===e?r(-1):r(e)},W=e=>e===i?(0,s.jsx)(eu.Z,{title:"Tutup",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),O(e)},children:(0,s.jsx)(eG.Z,{fontSize:"small"})})}):(0,s.jsx)(eu.Z,{title:"Buka",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),O(e)},children:(0,s.jsx)(eF.Z,{fontSize:"small"})})}),K=()=>R((0,_.L)("create-supply")),M=e=>{let a=new Date(e),t=a.getDate(),s=a.getMonth(),n=a.getFullYear();return"".concat(at(t),"/").concat(at(s+1),"/").concat(n)},H=e=>"Rp. ".concat(e.toLocaleString("id")),J=()=>{switch(m){case"":x("ASC");break;case"ASC":x("DESC");break;case"DESC":x("")}},L=(e,a)=>w({...y,[e]:a}),Y=e=>{let a=y[e];a||w({...y,[e]:"-"}),R(ag({id:e,description:y[e]}))};return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(p.Z,{variant:"contained",className:"global-btn",onClick:K,children:"Buat Supply Baru"})}),(0,s.jsxs)("div",{className:"table-content",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Kata Kunci"})}),(0,s.jsx)(Z.Z,{placeholder:"Masukkan Kata Kunci",variant:"outlined",size:"small",fullWidth:!0,value:u.current,onChange:e=>B(e.target.value)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Supplier"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:S,variant:"outlined",size:"small",onChange:e=>T(e.target.value),fullWidth:!0,multiple:!0,children:a.map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:C.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Sub Kategori"})}),(0,s.jsx)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:A,variant:"outlined",size:"small",onChange:e=>z(e.target.value),fullWidth:!0,multiple:!0,children:t.map((e,a)=>(0,s.jsxs)(ea.Z,{value:e.id,children:[(0,s.jsx)(D.Z,{size:"small",checked:I.current.includes(e.id)}),(0,s.jsx)(es.Z,{primary:e.name})]}))})]})})]}),e.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"20%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",width:"25%",children:"Sub Kategori"}),(0,s.jsx)(Q.Z,{align:"center",width:"25%",children:"Rak"}),(0,s.jsx)(Q.Z,{align:"center",width:"25%",colSpan:2,children:(0,s.jsxs)(eY.Z,{sx:{display:"flex",alignItems:"center"},children:["Tanggal Masuk",m?(0,s.jsx)(e9.Z,{className:"btn-sort ".concat("ASC"===m?"up":"down"),onClick:J}):(0,s.jsx)(e6.Z,{className:"btn-sort",onClick:J})]})})]})}),(0,s.jsx)($.Z,{children:e.map((e,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(X.Z,{sx:{"& > *":{borderBottom:"unset !important"}},onMouseOver:()=>j(a+1),onMouseOut:()=>j(0),onClick:()=>{O(a)},className:g===a+1?"table-row-hover":"",children:[(0,s.jsx)(Q.Z,{align:"center",width:"10%",children:a+1+b*f}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:e.sub_category.name}),(0,s.jsx)(Q.Z,{align:"center",children:e.rack.storage_number}),(0,s.jsx)(Q.Z,{align:"center",children:M(e.supply.issued_date)}),(0,s.jsx)(Q.Z,{align:"center",children:W(a)})]},e.id),(0,s.jsxs)(X.Z,{className:g===a+1?"table-row-hover":"",onMouseOver:()=>j(a+1),onMouseOut:()=>j(0),children:[(0,s.jsx)(Q.Z,{className:"p-0"}),(0,s.jsx)(Q.Z,{align:"left",colSpan:4,className:"p-0",children:(0,s.jsx)(eL.Z,{in:i===a,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(eY.Z,{className:"ml-40 mb-15",children:[(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"ID"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.unique_id})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Supplier"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.supply.supplier.name})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Stok"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.stock})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Satuan"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.unit})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Harga Beli"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:H(e.buying_price)})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Harga Jual"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:H(e.selling_price)})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"80%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{sx:{marginTop:"2.5px"},variant:"caption",children:"Deskripsi"}),(0,s.jsx)(eq.Z,{sx:{marginTop:"2.5px"},variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},variant:"standard",value:y[e.id],onChange:a=>L(e.id,a.target.value),size:"small",sx:{marginTop:"0px !important"},inputProps:{style:{fontSize:"12px",textAlign:"justify"}},onBlur:a=>Y(e.id),fullWidth:!0,className:"mb-5 mt-5",multiline:!0})})]})]})})}),(0,s.jsx)(Q.Z,{className:"p-0"})]})]}))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:l,rowsPerPage:f,page:b,onPageChange:(e,a)=>{N(a)},onRowsPerPageChange:e=>{v(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]})]})}var af=t(6323),av=t(5497),aZ=t(8075),ab=t(5451),aN=t(5683),ay=t(8587),aw=t(9451),a_=t(5166);let aS=e=>async a=>{a((0,_.c)(!0));let{keywords:t,limit:s,offset:n,orderBy:l,startDate:i,endDate:r,type:c}=e,d="/transactions?limit=".concat(s||25,"&offset=").concat(n||0);t&&(d+="&keywords=".concat(t)),i&&(d+="&start_date=".concat(i)),r&&(d+="&end_date=".concat(r)),(null==c?void 0:c.length)&&(d+="&type=".concat(JSON.stringify(c))),(null==l?void 0:l.length)&&(d+="&order_by=".concat(JSON.stringify(l)));let o=localStorage.getItem("access_token"),{data:h}=await T.Z.get(d,{headers:{Authorization:"Bearer "+o}}),{data:u}=await T.Z.get("transactions/all-employees",{headers:{Authorization:"Bearer "+o}}),{data:m}=await T.Z.get("transactions/all-items?stock=gt-0",{headers:{Authorization:"Bearer "+o}});if(h&&u&&m){var x,p,g;a({type:"transaction/set-transactions",payload:{transactions:h.data,totalRow:(null===(x=h.data[0])||void 0===x?void 0:x.total_row)||0}}),a({type:"employee/set-employees",payload:{employees:u.data,totalRow:(null===(p=u.data[0])||void 0===p?void 0:p.total_row)||0}}),a({type:"item/set-items",payload:{items:m.data,totalRow:(null===(g=m.data[0])||void 0===g?void 0:g.total_row)||0}})}a((0,_.c)(!1))},ak=(e,a)=>async t=>{try{let s=localStorage.getItem("access_token");await T.Z.post("/transactions",{...e,type:a},{headers:{Authorization:"Bearer "+s}}),t((0,_.c)(!0)),t(aS({})),t((0,_.L)("transactions")),t((0,_.c)(!1))}catch(e){K(e)}},aC=(e,a,t)=>async s=>{s((0,_.c)(!0));let n="/transactions/insight?start_date=".concat(e,"&end_date=").concat(a,"&series=").concat(t),l=localStorage.getItem("access_token"),{data:i}=await T.Z.get(n,{headers:{Authorization:"Bearer "+l}});i&&s({type:"transaction/set-insight",payload:{insight:i.data}}),s((0,_.c)(!1))};var aA=t(6727),aP=t.n(aA),aI=t(7920),aR=e=>"Rp. ".concat(e.toLocaleString("id"));let aT=e=>{let a=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][e.getDay()],t=e.getDate(),s=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e.getMonth()],n=e.getFullYear();return"".concat(a,", ").concat(t," ").concat(s," ").concat(n)},az=e=>{let a={margin:[0,10],table:{widths:[225,75,100,100],body:[[{text:"Nama Barang / Jasa",style:"tableHeader"},{text:"Jumlah",style:"tableHeader"},{text:"Harga",style:"tableHeader"},{text:"Total",style:"tableHeader"}]]}};return e.additional_services.forEach(e=>{a.table.body.push([{text:e.name,style:["tableData","left"]},{text:"1",style:["tableData","center"]},{text:aR(e.price),style:["tableData","right"]},{text:aR(e.price),style:["tableData","right"]}])}),e.transaction_items.forEach(e=>{a.table.body.push([{text:"".concat(e.item.unique_id," - ").concat(e.item.name),style:["tableData","left"]},{text:"".concat(e.amount," ").concat(e.item.unit),style:["tableData","center"]},{text:aR(e.item.selling_price),style:["tableData","right"]},{text:aR(e.amount*e.item.selling_price),style:["tableData","right"]}])}),a.table.body.push([{text:"",border:[!1,!1,!1,!1]},{text:"",border:[!1,!1,!1,!1]},{text:"Potongan",style:["discount","right"],border:[!1,!1,!1,!1]},{text:aR(e.discount),style:["discount","right"],border:[!1,!1,!1,!1]}],[{text:"",border:[!1,!1,!1,!1]},{text:"",border:[!1,!1,!1,!1]},{text:"Total",style:["totalPrice","right"],border:[!1,!1,!1,!1]},{text:aR(e.total_price),style:["totalPrice","right"],border:[!1,!1,!1,!1]}]),a},aB=e=>e||"-";var aE=async(e,a)=>{let t=[{layout:"noBorders",table:{widths:[38,250,212],body:[[{image:"data:image/jpeg;base64,".concat(a),height:38,width:38,rowSpan:3},{text:"SUMBER CAHAYA",style:"header"},{text:aT(new Date(e.created_at)),style:"date",rowSpan:3}],[{text:""},{text:"Jl. Raya Berbek No.27, Turipinggir, Berbek, Kec. Waru, Kabupaten Sidoarjo, Jawa Timur 61256",style:"subHeader"}],[{text:""},{text:"(031) 8680685",style:"subHeader"}]]}},{text:"KWITANSI",style:"invoice",margin:[0,10,0,0]},{text:"No. ".concat(e.invoice),style:"invoiceNum",margin:[0,2]},{columns:[{width:70,text:"Nama Customer",style:"detail"},{width:8,text:":",style:"detail"},{width:"*",text:aB(e.customer_name),style:"detail"}]},{columns:[{width:70,text:"Nomor HP",style:"detail"},{width:8,text:":",style:"detail"},{width:"*",text:aB(e.customer_phone),style:"detail"}]},{columns:[{width:70,text:"Kendaraan",style:"detail"},{width:8,text:":",style:"detail"},{width:"*",text:aB(e.vehicle_type||""),style:"detail"}]},{columns:[{width:70,text:"Nomor Kendaraan",style:"detail"},{width:8,text:":",style:"detail"},{width:"*",text:aB(e.plate_number||""),style:"detail"}]},{columns:[{width:70,text:"Mekanik",style:"detail"},{width:8,text:":",style:"detail"},{width:"*",text:aB(e.mechanics.map(e=>e.name).join(", ")),style:"detail"}]}];return t.push(az(e)),t.push({layout:"noBorders",table:{widths:[325,100,75],body:[[{text:"â€¢  Suyono - 1420005976302 (mandiri)\nâ€¢  Suyono - 2160472629 (BCA)",style:["detail"],margin:[15,0,0,0]},{text:""},{text:"",style:"detail"}],[{text:""},{text:"Penerima,",style:["detail","center"]},{text:"Hormat kami,",style:["detail","center"]}],[{text:""},{text:"(.............................)",style:["detail","center","recipientFooter"]},{text:"kasir",style:["detail","center","recipientFooter"]}]]}}),{pageOrientation:"landscape",pageSize:"A5",content:t,styles:{header:{fontSize:10,bold:!0},date:{fontSize:8,alignment:"right"},recipientFooter:{margin:[0,40,0,0]},subHeader:{fontSize:6},invoice:{fontSize:12,bold:!0,alignment:"center"},invoiceNum:{fontSize:8,bold:!0,alignment:"center"},detail:{fontSize:8},tableHeader:{fontSize:8,bold:!0,alignment:"center"},tableData:{fontSize:8},center:{alignment:"center"},right:{alignment:"right"},left:{alignment:"left"},totalPrice:{bold:!0,fontSize:9},discount:{fontSize:9}}}};function aO(e){let a=(0,d.v9)(e=>e.TransactionReducer.transactions),t=(0,d.v9)(e=>e.TransactionReducer.totalRow),[l,i]=(0,n.useState)(-1),[r,c]=(0,n.useState)(),o=(0,n.useRef)(""),[u,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(null),[g,j]=(0,n.useState)("DESC"),[f,v]=(0,n.useState)(0),[b,N]=(0,n.useState)(25),[y,w]=(0,n.useState)(0),[S,k]=(0,n.useState)(["Tidak Ada Yang Dipilih"]),C=(0,n.useRef)([]),A=(0,h.T)();(0,n.useEffect)(()=>{R([["created_at",g]])},[]),(0,n.useEffect)(()=>{R()},[b,y,u,x]),(0,n.useEffect)(()=>{g?R([["created_at",g]]):R()},[g]);let P=e=>{let a={OUT:"KELUAR",IN:"MASUK"},t=e[e.length-1],s=C.current.indexOf(t),n=S.indexOf(a[t]),l=[],i=[];i=-1===s?[...C.current,t]:C.current.filter((e,a)=>a!==s),l=-1===n?[...S,a[t]]:S.filter((e,a)=>a!==n),0!==i.length&&l.includes("Tidak Ada Yang Dipilih")?l.shift():0===i.length&&l.push("Tidak Ada Yang Dipilih"),k(l),C.current=i,R()},I=e=>{o.current=e,clearTimeout(r);let a=setTimeout(()=>{R()},1e3);c(a)},R=e=>{let a=y*b;a>=t&&(a=0);let s,n="",l=e=>{let a=at(e.get("D")),t=at(e.get("M")+1),s=e.get("years");return"".concat(t,"/").concat(a,"/").concat(s)};u&&(s=l(u)),x&&(n=l(x)+" 23:59:59"),A(aS({keywords:o.current,limit:b,offset:y*b,orderBy:e,startDate:s,endDate:n,type:C.current}))},T=e=>{l===e?i(-1):i(e)},z=e=>e===l?(0,s.jsx)(eu.Z,{title:"Tutup",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),T(e)},children:(0,s.jsx)(eG.Z,{fontSize:"small"})})}):(0,s.jsx)(eu.Z,{title:"Buka",children:(0,s.jsx)(U.Z,{onClick:a=>{a.stopPropagation(),T(e)},children:(0,s.jsx)(eF.Z,{fontSize:"small"})})}),B=e=>A((0,_.L)(e)),E=e=>{let a=new Date(e),t=a.getDate(),s=a.getMonth(),n=a.getFullYear();return"".concat(at(t),"/").concat(at(s+1),"/").concat(n)},O=()=>{switch(g){case"ASC":j("DESC");break;case"DESC":j("ASC")}},W=e=>(0,s.jsxs)("div",{className:"flex-center",children:[(0,s.jsx)("div",{className:"bullet mr-5 ".concat("OUT"===e?"red":"green")}),(0,s.jsx)(eq.Z,{variant:"caption",children:"OUT"===e?"KELUAR":"MASUK"})]}),K=async a=>{aP().vfs=aI.I.vfs;let t=await aE(a,e.base64Logo);aP().createPdf(t).open()},M=e=>"IN"===e.type?(0,s.jsxs)(eY.Z,{className:"ml-40 mb-15",children:[(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nama Pelanggan"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.customer_name})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nomor HP"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.customer_phone})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Kendaraan"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.vehicle_type})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nomor Kendaraan"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.plate_number})})]}),(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between mt-10",children:(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Rincian"})})})})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between ml-15 mt-5",children:(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Mekanik"})})})})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-column flex-space-between ml-30 mb-10",children:e.mechanics.map((e,a)=>(0,s.jsx)(eY.Z,{className:"d-flex mt-2 align-items-center justify-content-between",width:"100%",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-between",children:[(0,s.jsxs)(eq.Z,{variant:"caption",className:"mr-10",children:[a+1,"."]}),(0,s.jsx)(eq.Z,{variant:"caption",children:e.name})]})}))}),(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between ml-15 mt-5",children:(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Jasa"})})})})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-column flex-space-between ml-30 mb-10",children:e.additional_services.map((e,a)=>(0,s.jsxs)(eY.Z,{className:"d-flex mt-2 align-items-center justify-content-between",width:"100%",children:[(0,s.jsxs)(eY.Z,{width:"25%",className:"d-flex",children:[(0,s.jsxs)(eq.Z,{variant:"caption",className:"mr-10",children:[a+1,"."]}),(0,s.jsx)(eq.Z,{variant:"caption",children:e.name})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-between pr-10",children:[(0,s.jsx)(eq.Z,{variant:"caption",className:"mr-10",children:"="}),(0,s.jsx)(eq.Z,{variant:"caption",children:aR(e.price)})]})]}))}),(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between ml-15 mt-5",children:(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Barang"})})})})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-column flex-space-between ml-30 mb-10",children:e.transaction_items.map((e,a)=>(0,s.jsxs)(eY.Z,{className:"d-flex mt-2 justify-content-between",width:"100%",children:[(0,s.jsxs)(eY.Z,{width:"50%",className:"d-flex",children:[(0,s.jsxs)(eq.Z,{variant:"caption",className:"mr-10",children:[a+1,"."]}),(0,s.jsxs)(eq.Z,{variant:"caption",children:[e.item.unique_id," - ",e.item.name]})]}),(0,s.jsxs)(eY.Z,{className:"d-flex",children:[(0,s.jsxs)(eq.Z,{variant:"caption",className:"mr-10",children:[e.amount," ",e.item.unit]}),(0,s.jsx)(eq.Z,{variant:"caption",className:"mr-10",children:"x"}),(0,s.jsx)(eq.Z,{variant:"caption",className:"mr-10",children:aR(e.item.selling_price)}),(0,s.jsx)(eq.Z,{variant:"caption",className:"mr-10",children:"="}),(0,s.jsx)(eq.Z,{variant:"caption",children:aR(e.item.selling_price*e.amount)})]})]}))}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Potongan"})}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:aR(e.discount)})})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between mt-20",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Catatan Transaksi"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.notes||"-"})})]}),(0,s.jsx)(eY.Z,{className:"d-flex flex-row-reverse",children:(0,s.jsx)(eu.Z,{title:"Cetak Kwitansi",children:(0,s.jsx)(U.Z,{onClick:()=>K(e),children:(0,s.jsx)(ab.Z,{sx:{color:"#6A32CB"},fontSize:"small"})})})})]}):(0,s.jsxs)(eY.Z,{className:"ml-40 mb-15",children:[(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Penanggung Jawab"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.customer_name})})]}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Nomor HP"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.customer_phone})})]}),(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between mt-10",children:(0,s.jsx)(eY.Z,{className:"width-25",children:(0,s.jsx)(eY.Z,{className:"d-flex flex-space-between",children:(0,s.jsx)(eq.Z,{variant:"caption",children:(0,s.jsx)("span",{style:{fontWeight:"bold"},children:"Rincian"})})})})}),(0,s.jsx)(eY.Z,{className:"d-flex flex-column flex-space-between ml-15 mb-10",children:e.additional_services.map((e,a)=>(0,s.jsxs)(eY.Z,{className:"d-flex mt-2 align-items-center justify-content-between",width:"100%",children:[(0,s.jsx)(eY.Z,{width:"25%",className:"d-flex align-items-center",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.name})}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-between pr-10",children:[(0,s.jsx)(eq.Z,{variant:"caption",className:"mr-10",children:"="}),(0,s.jsx)(eq.Z,{variant:"caption",children:aR(e.price)})]})]}))}),(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",width:"100%",children:[(0,s.jsx)(eY.Z,{className:"width-20",children:(0,s.jsxs)(eY.Z,{className:"d-flex flex-space-between",children:[(0,s.jsx)(eq.Z,{variant:"caption",children:"Catatan Transaksi"}),(0,s.jsx)(eq.Z,{variant:"caption",children:":"})]})}),(0,s.jsx)(eY.Z,{className:"width-80 ml-10",textAlign:"justify",children:(0,s.jsx)(eq.Z,{variant:"caption",children:e.notes||"-"})})]})]});return(0,s.jsxs)("div",{className:"root-with-filter",children:[(0,s.jsx)("div",{className:"register-container",children:(0,s.jsxs)(af.Z,{ariaLabel:"speed dial for transaction action",direction:"down",icon:(0,s.jsx)(av.Z,{icon:(0,s.jsx)(aN.Z,{})}),FabProps:{sx:{bgcolor:"#6A32CB","&:hover":{bgcolor:"#6A32CB"}}},children:[(0,s.jsx)(aZ.Z,{icon:(0,s.jsx)(ay.Z,{onClick:()=>B("create-transaction-in")}),tooltipTitle:"Tambah Transaksi Masuk"},"add"),(0,s.jsx)(aZ.Z,{icon:(0,s.jsx)(aw.Z,{onClick:()=>B("create-transaction-out")}),tooltipTitle:"Tambah Transaksi Keluar"},"add"),(0,s.jsx)(aZ.Z,{icon:(0,s.jsx)(a_.Z,{onClick:()=>B("insight")}),tooltipTitle:"Statistik"},"add")]})}),(0,s.jsxs)("div",{className:"table-content width-80",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-25",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Kata Kunci"})}),(0,s.jsx)(Z.Z,{placeholder:"Masukkan Kata Kunci",variant:"outlined",size:"small",fullWidth:!0,value:o.current,onChange:e=>I(e.target.value)})]})}),(0,s.jsx)("div",{className:"width-25",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Tanggal Awal"})}),(0,s.jsx)(ac.M,{format:"DD/MM/YYYY",className:"datepicker-search-form",value:null,maxDate:x,onChange:e=>m(e),slotProps:{field:{clearable:!0}}})]})}),(0,s.jsx)("div",{className:"width-25",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Tanggal Akhir"})}),(0,s.jsx)(ac.M,{format:"DD/MM/YYYY",className:"datepicker-search-form",value:null,minDate:u,onChange:e=>p(e),slotProps:{field:{clearable:!0}}})]})}),(0,s.jsx)("div",{className:"width-20",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Status"})}),(0,s.jsxs)(ee.Z,{className:"text-align-left",renderValue:e=>e.join(", "),value:S,variant:"outlined",size:"small",onChange:e=>P(e.target.value),fullWidth:!0,multiple:!0,children:[(0,s.jsxs)(ea.Z,{value:"OUT",children:[(0,s.jsx)(D.Z,{size:"small",checked:C.current.includes("OUT")}),(0,s.jsx)(es.Z,{primary:"KELUAR"})]}),(0,s.jsxs)(ea.Z,{value:"IN",children:[(0,s.jsx)(D.Z,{size:"small",checked:C.current.includes("IN")}),(0,s.jsx)(es.Z,{primary:"MASUK"})]})]})]})})]}),a.length?(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:650},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"20%",children:"Nomor Kwitansi"}),(0,s.jsx)(Q.Z,{align:"center",width:"25%",children:"Status"}),(0,s.jsx)(Q.Z,{align:"left",width:"25%",children:"Total"}),(0,s.jsx)(Q.Z,{align:"center",width:"20%",children:(0,s.jsxs)(eY.Z,{sx:{display:"flex",alignItems:"center"},children:["Tanggal",(0,s.jsx)(e9.Z,{className:"btn-sort ".concat("ASC"===g?"up":"down"),onClick:O})]})}),(0,s.jsx)(Q.Z,{align:"center",width:"5%"})]})}),(0,s.jsx)($.Z,{children:a.map((e,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(X.Z,{sx:{"& > *":{borderBottom:"unset !important"}},onMouseOver:()=>v(a+1),onMouseOut:()=>v(0),onClick:()=>{T(a)},className:f===a+1?"table-row-hover":"",children:[(0,s.jsx)(Q.Z,{align:"center",children:a+1+y*b}),(0,s.jsx)(Q.Z,{align:"left",children:e.invoice}),(0,s.jsx)(Q.Z,{align:"center",children:W(e.type)}),(0,s.jsx)(Q.Z,{align:"left",children:aR(e.total_price)}),(0,s.jsx)(Q.Z,{align:"left",children:E(e.created_at)}),(0,s.jsx)(Q.Z,{align:"center",children:z(a)})]},e.id),(0,s.jsxs)(X.Z,{className:f===a+1?"table-row-hover":"",onMouseOver:()=>v(a+1),onMouseOut:()=>v(0),children:[(0,s.jsx)(Q.Z,{className:"p-0"}),(0,s.jsx)(Q.Z,{align:"left",colSpan:4,className:"p-0",children:(0,s.jsx)(eL.Z,{in:l===a,timeout:"auto",unmountOnExit:!0,children:M(e)})}),(0,s.jsx)(Q.Z,{className:"p-0"})]})]}))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[25,50,100],component:"div",count:t,rowsPerPage:b,page:y,onPageChange:(e,a)=>{w(a)},onRowsPerPageChange:e=>{N(+e.target.value)}})]})}):(0,s.jsx)(ed,{})]})]})}var aW=t(7358),aK=t(8895),aD=t(2797),aU=t(6571),aM=t(7534),aH=t.n(aM);let aJ=e=>Array.isArray(e)?e.map(e=>aH()[e]||e).join(" "):aH()[e]||e;function aL(){let e=(0,h.T)(),a=(0,d.v9)(e=>e.ItemReducer.items),[t,l]=(0,n.useState)([]),i=(0,d.v9)(e=>e.EmployeeReducer.employees),[r,c]=(0,n.useState)([]),[o,u]=(0,n.useState)({vehicle_type:"",plate_number:"",customer_name:"",customer_phone:"",notes:"",machine_number:""}),[m,x]=(0,n.useState)(0),[g,j]=(0,n.useState)([]),[f,v]=(0,n.useState)([]),[b,N]=(0,n.useState)(0),[y,w]=(0,n.useState)(!0),[S,k]=(0,n.useState)(),[A,P]=(0,n.useState)(10),[I,R]=(0,n.useState)(0),[T,z]=(0,n.useState)(0),B=(0,n.useRef)("");(0,n.useEffect)(()=>{ed()},[I,A,a]),(0,n.useEffect)(()=>{let e=!W(),a=!K();w(e||a)},[o,f]),(0,n.useEffect)(()=>{let e=0;f.forEach(a=>{let{price:t}=a;return e+=t}),g.forEach(a=>e+=a.price*a.amount),N(e-=m)},[f,g,m]);let E=a=>{a.preventDefault(),C({icon:"question",title:"Ingin meninggalkan halaman buat transaksi baru?",text:"Semua perubahan tidak akan tersimpan",action:()=>e((0,_.L)("transactions"))})},O=()=>{let a={...o,services:f,mechanicIds:r,discount:m,items:g.map(e=>{let{id:a,amount:t}=e;return{id:a,amount:t}})};C({action:()=>e(ak(a,"IN")),title:"Buat Transaksi?",text:"Data yang sudah tersimpan tidak dapat diubah.",icon:"question"})},W=()=>{let{vehicle_type:e,plate_number:a,customer_name:t,customer_phone:s}=o;return!!e&&!!a&&!!t&&!!s},K=()=>{for(let e of f)if(!e.name)return!1;return!0},D=()=>{let e=i.filter(e=>!r.includes(e.id));c([...r,e[0].id])},M=()=>{v([...f,{name:"",price:0}])},H=e=>{j([...g,{amount:1,price:e.selling_price,id:e.id,stock:e.stock,name:e.name,unit:e.unit}])},L=e=>{c(r.filter((a,t)=>t!==e))},Y=e=>{v(f.filter((a,t)=>t!==e))},es=e=>{j(g.filter((a,t)=>t!==e))},en=(e,a)=>{let t=JSON.parse(JSON.stringify(r));t[e]=a,c(t)},el=e=>{if(e){if(e){let a=String(e).split("Rp. "),t=+a[a.length-1].split(".").join("");if(isNaN(t))return 0;e=t}}else e=0;return e},ei=(e,a,t)=>{let s=JSON.parse(JSON.stringify(f));"price"===t&&(a=el(a)),s[e]={...s[e],[t]:a},v(s)},er=e=>{B.current=e,clearTimeout(S);let a=setTimeout(()=>{ed()},1e3);k(a)},ec=(e,a)=>{let t=JSON.parse(JSON.stringify(g)),s=t[e];a>=s.stock&&(a=s.stock),s.amount=a,j(t)},ed=()=>{let e=a.filter(e=>{let a=e.name.toLowerCase(),t=B.current.toLowerCase();return a.includes(t)||e.unique_id.includes(t)});z(e.length);let t=I*A;l(e.filter((e,a)=>a>=t&&a<t+A))};return(0,s.jsxs)("div",{className:aJ("create-transaction-container"),children:[(0,s.jsxs)("div",{className:aJ("title-container"),children:[(0,s.jsxs)("div",{className:aJ("back-btn"),onClick:E,children:[(0,s.jsx)(al.Z,{}),(0,s.jsx)("p",{children:"BACK"})]}),(0,s.jsx)("h2",{children:"Buat Transaksi Masuk Baru"}),(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:aJ("content"),children:[(0,s.jsxs)("div",{className:aJ("form"),children:[(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Nama"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:o.customer_name,onChange:e=>u({...o,customer_name:e.target.value}),placeholder:"Nama Pemilik Kendaraan",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Nomor HP"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:o.customer_phone,onChange:e=>u({...o,customer_phone:e.target.value}),placeholder:"Nomor HP",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Kendaraan"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:o.vehicle_type,onChange:e=>u({...o,vehicle_type:e.target.value}),placeholder:"Jenis Kendaraan",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Nomor Kendaraan"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:o.plate_number,onChange:e=>u({...o,plate_number:e.target.value}),placeholder:"Nomor Polisi/Registrasi Kendaraan",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Nomor Rangka"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:o.machine_number,onChange:e=>u({...o,machine_number:e.target.value}),placeholder:"Nomor Rangka/Mesin",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aJ(["form-group","multiline"]),children:[(0,s.jsx)("h4",{children:"Catatan"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:o.notes,onChange:e=>u({...o,notes:e.target.value}),placeholder:"Catatan Transaksi",variant:"standard",fullWidth:!0,multiline:!0,maxRows:4})})]}),(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Potongan"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},className:aJ(["react-number-input","price"]),variant:"standard",value:aR(m),onChange:e=>x(el(e.target.value)),fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aJ("form-group"),children:[(0,s.jsx)("h4",{children:"Total"}),(0,s.jsx)("div",{className:aJ("user-input"),children:(0,s.jsx)(an.h3,{className:aJ(["react-number-input","total-price"]),value:b,prefix:"Rp. ",thousandSeparator:".",decimalSeparator:",",disabled:!0})})]})]}),(0,s.jsx)("div",{className:aJ(["form-mechanic","mt-10"]),children:(0,s.jsxs)(aW.Z,{elevation:0,className:aJ(["accordion"]),children:[(0,s.jsx)(aK.Z,{className:aJ(["accordion-content"]),expandIcon:(0,s.jsx)(aU.Z,{}),children:(0,s.jsx)("h4",{children:"Mekanik"})}),(0,s.jsxs)(aD.Z,{className:aJ(["accordion-content"]),children:[(0,s.jsx)("div",{className:aJ(["mechanics"]),children:r.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{children:[a+1,"."]}),(0,s.jsx)(ee.Z,{value:e,label:"mechanic",variant:"standard",disableUnderline:!0,onChange:e=>en(a,e.target.value),fullWidth:!0,children:i.filter(a=>(!r.includes(a.id)||a.id===e)&&a.is_active).map(a=>(0,s.jsxs)(ea.Z,{value:a.id,selected:e===a.id,children:[a.name," â€” ",a.title]}))}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:e=>{e.stopPropagation(),L(a)},children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]}))}),(0,s.jsx)("div",{className:aJ(["add-btn-container"]),children:(0,s.jsx)(p.Z,{variant:"contained",className:aJ(["global-btn","add-btn"]),onClick:D,disabled:r.length===i.length,children:(0,s.jsx)(eq.Z,{children:"Tambah Mekanik"})})})]})]})}),(0,s.jsx)("div",{className:aJ(["form-service","mt-10"]),children:(0,s.jsxs)(aW.Z,{elevation:0,className:aJ(["accordion"]),children:[(0,s.jsx)(aK.Z,{className:aJ(["accordion-content"]),expandIcon:(0,s.jsx)(aU.Z,{}),children:(0,s.jsx)("h4",{children:"Jasa"})}),(0,s.jsxs)(aD.Z,{className:aJ(["accordion-content"]),children:[(0,s.jsx)("div",{className:aJ(["services"]),children:f.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(eq.Z,{children:[a+1,"."]}),(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},placeholder:"Nama Jasa",variant:"standard",value:e.name,onChange:e=>ei(a,e.target.value,"name"),fullWidth:!0}),(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},className:aJ(["react-number-input","price"]),variant:"standard",value:aR(f[a].price),onChange:e=>ei(a,e.target.value,"price"),fullWidth:!0}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:e=>{e.stopPropagation(),Y(a)},children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]}))}),(0,s.jsx)("div",{className:aJ(["add-btn-container"]),children:(0,s.jsx)(p.Z,{variant:"contained",className:aJ(["global-btn","add-btn"]),onClick:M,children:(0,s.jsx)(eq.Z,{children:"Tambah Jasa"})})})]})]})}),(0,s.jsx)("div",{className:aJ(["form-item","mt-10"]),children:(0,s.jsxs)(aW.Z,{elevation:0,className:aJ(["accordion"]),children:[(0,s.jsx)(aK.Z,{className:aJ(["accordion-content"]),expandIcon:(0,s.jsx)(aU.Z,{}),children:(0,s.jsx)("h4",{children:"Barang"})}),(0,s.jsxs)(aD.Z,{className:aJ(["accordion-content"]),children:[(0,s.jsx)("div",{className:aJ(["items"]),children:g.map((e,a)=>(0,s.jsxs)("div",{className:"width-100 flex-between",children:[(0,s.jsx)("div",{className:"width-5",children:(0,s.jsxs)(eq.Z,{className:aJ(["item-detail"]),children:[a+1,"."]})}),(0,s.jsx)("div",{className:"width-40",children:(0,s.jsx)(eq.Z,{className:aJ(["item-detail"]),children:e.name})}),(0,s.jsxs)("div",{className:"width-20 flex-start",children:[(0,s.jsx)(an.h3,{onKeyDown:e=>{"-"===e.key&&e.preventDefault()},className:aJ(["react-number-input","bg-default"]),min:1,max:e.stock,size:20,value:e.amount,thousandSeparator:".",decimalSeparator:",",onValueChange:e=>ec(a,+e.value)}),(0,s.jsx)(eq.Z,{className:aJ(["item-detail","ml-10"]),children:e.unit})]}),(0,s.jsx)("div",{className:"width-25 flex-end",children:(0,s.jsx)(eq.Z,{className:aJ(["item-detail","total-price"]),children:aR(e.amount*e.price)})}),(0,s.jsx)("div",{className:"width-10",children:(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:e=>{e.stopPropagation(),es(a)},children:(0,s.jsx)(J.Z,{fontSize:"small"})})})})]}))}),(0,s.jsxs)("div",{className:aJ(["item-table-container"]),children:[(0,s.jsx)(Z.Z,{placeholder:"Masukkan Kata Kunci",variant:"outlined",size:"small",className:"width-40 mt-10 mb-10",value:B.current,onChange:e=>er(e.target.value)}),(0,s.jsxs)(q.Z,{className:aJ(["table-parent"]),children:[(0,s.jsx)(G.Z,{children:(0,s.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:750},size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"left",width:"20%",children:"ID"}),(0,s.jsx)(Q.Z,{align:"left",width:"40%",children:"Nama"}),(0,s.jsx)(Q.Z,{align:"left",width:"20%",children:"Harga"}),(0,s.jsx)(Q.Z,{align:"left",width:"15%",children:"Stok"}),(0,s.jsx)(Q.Z,{align:"center",width:"5%"})]})}),(0,s.jsx)($.Z,{children:t.map((e,a)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(X.Z,{sx:{"& > *":{borderBottom:"unset !important"}},children:[(0,s.jsx)(Q.Z,{align:"left",children:e.unique_id}),(0,s.jsx)(Q.Z,{align:"left",children:e.name}),(0,s.jsx)(Q.Z,{align:"left",children:"Rp. ".concat(e.selling_price.toLocaleString("id"))}),(0,s.jsxs)(Q.Z,{align:"left",children:[e.stock," ",e.unit]}),(0,s.jsx)(Q.Z,{align:"center",children:(0,s.jsx)(p.Z,{variant:"contained",className:aJ(["global-btn","add-item-btn"]),onClick:()=>H(e),disabled:g.map(e=>e.id).includes(e.id),children:(0,s.jsx)(eq.Z,{children:"Tambahkan"})})})]},e.id)}))})]})}),(0,s.jsx)(et.Z,{className:"table-pagination",rowsPerPageOptions:[10,25,50],component:"div",count:T,rowsPerPage:A,page:I,onPageChange:(e,a)=>{R(a)},onRowsPerPageChange:e=>{P(+e.target.value)}})]})]})]})]})})]}),(0,s.jsx)("div",{className:aJ("submit-btn-container"),children:(0,s.jsx)(p.Z,{variant:"contained",className:aJ(["global-btn","save-btn"]),onClick:O,disabled:y,children:"Simpan"})})]})}let aY=e=>Array.isArray(e)?e.map(e=>aH()[e]||e).join(" "):aH()[e]||e;function aq(){let e=(0,h.T)(),[a,t]=(0,n.useState)({vehicle_type:"",plate_number:"",customer_name:"",customer_phone:"",notes:"",machine_number:""}),[l,i]=(0,n.useState)([]),[r,c]=(0,n.useState)([]),[d,o]=(0,n.useState)(0),[u,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=!j(),a=!f();m(e||a)},[a,r]),(0,n.useEffect)(()=>{let e=0;r.forEach(a=>{let{price:t}=a;return e+=t}),l.forEach(a=>e+=a.price*a.amount),o(e)},[r,l]);let x=a=>{a.preventDefault(),C({icon:"question",title:"Ingin meninggalkan halaman buat transaksi baru?",text:"Semua perubahan tidak akan tersimpan",action:()=>e((0,_.L)("transactions"))})},g=()=>{let t={...a,services:r,mechanicIds:[],items:l.map(e=>{let{id:a,amount:t}=e;return{id:a,amount:t}})};C({action:()=>e(ak(t,"OUT")),title:"Buat Transaksi?",text:"Data yang sudah tersimpan tidak dapat diubah.",icon:"question"})},j=()=>{let{customer_name:e,customer_phone:t}=a;return!!e&&!!t},f=()=>{for(let e of r)if(!e.name)return!1;return!0},v=()=>{c([...r,{name:"",price:0}])},b=e=>{c(r.filter((a,t)=>t!==e))},N=(e,a,t)=>{let s=JSON.parse(JSON.stringify(r));if("price"===t){if(a){if(a){let e=String(a).split("Rp. "),t=+e[e.length-1].split(".").join("");if(isNaN(t))return;a=t}}else a=0}s[e]={...s[e],[t]:a},c(s)};return(0,s.jsxs)("div",{className:aY("create-transaction-container"),children:[(0,s.jsxs)("div",{className:aY("title-container"),children:[(0,s.jsxs)("div",{className:aY("back-btn"),onClick:x,children:[(0,s.jsx)(al.Z,{}),(0,s.jsx)("p",{children:"BACK"})]}),(0,s.jsx)("h2",{children:"Buat Transaksi Keluar Baru"}),(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:aY("content"),children:[(0,s.jsxs)("div",{className:aY("form"),children:[(0,s.jsxs)("div",{className:aY("form-group"),children:[(0,s.jsx)("h4",{children:"Penanggung Jawab"}),(0,s.jsx)("div",{className:aY("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:a.customer_name,onChange:e=>t({...a,customer_name:e.target.value}),placeholder:"Nama Penanggung Jawab",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aY("form-group"),children:[(0,s.jsx)("h4",{children:"Nomor HP"}),(0,s.jsx)("div",{className:aY("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:a.customer_phone,onChange:e=>t({...a,customer_phone:e.target.value}),placeholder:"Nomor HP",variant:"standard",fullWidth:!0})})]}),(0,s.jsxs)("div",{className:aY(["form-group","multiline"]),children:[(0,s.jsx)("h4",{children:"Catatan"}),(0,s.jsx)("div",{className:aY("user-input"),children:(0,s.jsx)(Z.Z,{className:"text-align-left",value:a.notes,onChange:e=>{e.target.value.length<=255&&t({...a,notes:e.target.value})},placeholder:"Catatan Transaksi",variant:"standard",fullWidth:!0,multiline:!0,maxRows:4})})]}),(0,s.jsxs)("div",{className:aY("form-group"),children:[(0,s.jsx)("h4",{children:"Total"}),(0,s.jsx)("div",{className:aY("user-input"),children:(0,s.jsx)(an.h3,{className:aY(["react-number-input","total-price"]),value:d,prefix:"Rp. ",thousandSeparator:".",decimalSeparator:",",disabled:!0})})]})]}),(0,s.jsx)("div",{className:aY(["form-service","mt-10"]),children:(0,s.jsxs)(aW.Z,{elevation:0,className:aY(["accordion"]),children:[(0,s.jsx)(aK.Z,{className:aY(["accordion-content"]),expandIcon:(0,s.jsx)(aU.Z,{}),children:(0,s.jsx)("h4",{children:"Rincian"})}),(0,s.jsxs)(aD.Z,{className:aY(["accordion-content"]),children:[(0,s.jsx)("div",{className:aY(["services"]),children:r.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(eq.Z,{children:[a+1,"."]}),(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},placeholder:"Nama Barang / Jasa",variant:"standard",value:e.name,onChange:e=>N(a,e.target.value,"name"),fullWidth:!0}),(0,s.jsx)(Z.Z,{type:"text",InputProps:{disableUnderline:!0},className:aY(["react-number-input","price"]),variant:"standard",value:aR(r[a].price),onChange:e=>N(a,e.target.value,"price"),fullWidth:!0}),(0,s.jsx)(eu.Z,{title:"Hapus",children:(0,s.jsx)(U.Z,{onClick:e=>{e.stopPropagation(),b(a)},children:(0,s.jsx)(J.Z,{fontSize:"small"})})})]}))}),(0,s.jsx)("div",{className:aY(["add-btn-container"]),children:(0,s.jsx)(p.Z,{variant:"contained",className:aY(["global-btn","add-btn"]),onClick:v,children:(0,s.jsx)(eq.Z,{children:"Tambah Barang / Jasa"})})})]})]})})]}),(0,s.jsx)("div",{className:aY("submit-btn-container"),children:(0,s.jsx)(p.Z,{variant:"contained",className:aY(["global-btn","save-btn"]),onClick:g,disabled:u,children:"Simpan"})})]})}var aG=t(44),aF=t(2150),aV=t.n(aF),aX=t(3148),aQ=t(5430);let a$=e=>Array.isArray(e)?e.map(e=>aV()[e]||e).join(" "):aV()[e]||e;function a0(){let e=(0,h.T)(),a=(0,d.v9)(e=>e.TransactionReducer.insight),[t,l]=(0,n.useState)(0),[i,r]=(0,n.useState)(!1),[c,o]=(0,n.useState)(0),[u,m]=(0,n.useState)(!0),[x,j]=(0,n.useState)("once"),[f,v]=(0,n.useState)(),[Z,b]=(0,n.useState)();(0,n.useEffect)(()=>{m(!f||!Z)},[f,Z]),(0,n.useEffect)(()=>{l(Object.keys(a).length)},[a]);let N=a=>{a.preventDefault(),e((0,_.L)("transactions"))},y=()=>{r(!0);let a=e=>{let a=at(e.get("D")),t=at(e.get("M")+1),s=e.get("years");return"".concat(t,"/").concat(a,"/").concat(s)};e(aC(a(f),a(Z),x))};return(0,s.jsxs)("div",{className:a$("insight-container"),children:[(0,s.jsxs)("div",{className:a$("title-container"),children:[(0,s.jsxs)("div",{className:a$("back-btn"),onClick:N,children:[(0,s.jsx)(al.Z,{}),(0,s.jsx)("p",{children:"BACK"})]}),(0,s.jsx)("h2",{children:"Statistik"}),(0,s.jsx)("div",{})]}),(0,s.jsx)("div",{className:"root-with-filter",children:(0,s.jsxs)("div",{className:"table-content width-80",children:[(0,s.jsxs)("div",{className:"filter-group mb-50",children:[(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Tanggal Awal"})}),(0,s.jsx)(ac.M,{format:"DD/MM/YYYY",className:"datepicker-search-form",value:f,maxDate:Z,onChange:e=>v(e)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Tanggal Akhir"})}),(0,s.jsx)(ac.M,{format:"DD/MM/YYYY",className:"datepicker-search-form",value:Z,minDate:f,onChange:e=>b(e)})]})}),(0,s.jsx)("div",{className:"width-30",children:(0,s.jsxs)("div",{className:"text-align-left",children:[(0,s.jsx)("p",{className:"mb-10",children:(0,s.jsx)("b",{children:"Interval"})}),(0,s.jsxs)("div",{className:"flex-between",children:[(0,s.jsxs)(ee.Z,{className:"text-align-left width-100 mr-20",value:x,variant:"outlined",size:"small",onChange:e=>j(e.target.value),fullWidth:!0,children:[(0,s.jsx)(ea.Z,{value:"once",children:"Once"}),(0,s.jsx)(ea.Z,{value:"daily",children:"Daily"}),(0,s.jsx)(ea.Z,{value:"weekly",children:"Weekly"}),(0,s.jsx)(ea.Z,{value:"monthly",children:"Monthly"})]}),(0,s.jsx)("div",{className:a$(["btn-container"]),children:(0,s.jsx)(p.Z,{variant:"contained",className:a$(["global-btn"]),onClick:y,disabled:u,children:"Hitung"})})]})]})})]}),i&&t?(0,s.jsxs)("div",{className:a$(["content-container"]),children:[(0,s.jsxs)(g.Z,{value:c,onChange:(e,a)=>o(a),TabIndicatorProps:{style:{backgroundColor:"#6A32CB"}},children:[(0,s.jsx)(aG.Z,{label:"Table",className:a$(0===c?"selected":"")}),(0,s.jsx)(aG.Z,{label:"Grafik",className:a$(1===c?"selected":"")})]}),(()=>{if(0===c)return(0,s.jsx)("div",{className:a$(["content"]),children:(0,s.jsx)(q.Z,{children:(0,s.jsx)(G.Z,{sx:{maxHeight:"60vh"},children:(0,s.jsxs)(F.Z,{stickyHeader:!0,size:"small",children:[(0,s.jsx)(V.Z,{children:(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(Q.Z,{align:"center",width:"5%",children:"No."}),(0,s.jsx)(Q.Z,{align:"left",width:"40%",children:"Periode"}),(0,s.jsx)(Q.Z,{align:"right",width:"15%",children:"Pemasukan"}),(0,s.jsx)(Q.Z,{align:"right",width:"15%",children:"Pengeluaran"}),(0,s.jsx)(Q.Z,{align:"right",width:"25%",children:"Total"})]})}),(0,s.jsx)($.Z,{children:Object.values(a).map((e,a)=>(0,s.jsxs)(X.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,s.jsx)(Q.Z,{align:"center",children:a+1}),(0,s.jsx)(Q.Z,{align:"left",children:e.label}),(0,s.jsx)(Q.Z,{align:"right",children:aR(e.sumIn)}),(0,s.jsx)(Q.Z,{align:"right",children:aR(e.sumOut)}),(0,s.jsx)(Q.Z,{align:"right",className:a$([e.sumIn>e.sumOut?"font-green":"font-red","foobar"]),children:aR(Math.abs(e.sumIn-e.sumOut))})]},a))})]})})})})})(),t>31?(0,s.jsx)("div",{className:a$(["content"]),children:(0,s.jsx)("h4",{className:"mt-25",children:"RANGE DATA TERLALU BESAR UNTUK DITAMPILKAN OLEH GRAFIK"})}):1===c?(0,s.jsx)("div",{className:a$(["content"]),children:(0,s.jsx)(aQ.x1,{data:(()=>{let e=Object.values(a),t={labels:e.map(e=>e.label),datasets:[{label:"Pemasukan",data:e.map(e=>e.sumIn),fill:!1,borderColor:"green",tension:.3},{label:"Pengeluaran",data:e.map(e=>e.sumOut),fill:!1,borderColor:"red",tension:.3},{label:"Total",data:e.map(e=>e.sumIn-e.sumOut),fill:!1,borderColor:"blue",tension:.3}]};return t})(),options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Grafik Transaksi"}}}})}):void 0]}):(0,s.jsx)(ed,{})]})})]})}aX.kL.register(aX.uw,aX.f$,aX.od,aX.jn,aX.De,aX.Dx,aX.u);var a1=!0;function a5(e){let a=(0,d.v9)(e=>e.GlobalContextReducer.routeName),t=(0,h.T)(),l=(0,u.useRouter)(),[i,r]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{localStorage.getItem("access_token")?(t((0,w.AW)(l)),t((0,w.$j)())):l.push("/auth"),r(!0)},[]),i)?(0,s.jsx)(o,{children:(0,s.jsxs)("div",{className:"flex-start",style:{height:"100vh",width:"100%"},children:[(0,s.jsx)(P,{}),(0,s.jsx)("div",{className:"pl-25 pr-25 root-page",children:(()=>{switch(a){case"roles":return(0,s.jsx)(Y,{});case"user":return(0,s.jsx)(eh,{});case"employees":return(0,s.jsx)(eZ,{});case"catalogs":return(0,s.jsx)(eS,{});case"categories":return(0,s.jsx)(eR,{});case"sub_categories":return(0,s.jsx)(eW,{});case"racks":return(0,s.jsx)(eJ,{});case"suppliers":return(0,s.jsx)(e3,{});case"supplies":return(0,s.jsx)(as,{});case"items":return(0,s.jsx)(aj,{});case"create-supply":return(0,s.jsx)(ax,{});case"transactions":return(0,s.jsx)(aO,{base64Logo:e.base64Logo});case"create-transaction-in":return(0,s.jsx)(aL,{});case"create-transaction-out":return(0,s.jsx)(aq,{});case"insight":return(0,s.jsx)(a0,{});default:return(0,s.jsx)("div",{children:(0,s.jsx)("h1",{children:a})})}})()})]})}):(0,s.jsx)(s.Fragment,{})}},8599:function(e,a,t){"use strict";t.d(a,{$j:function(){return r},AW:function(){return c},g6:function(){return d},n1:function(){return i},bc:function(){return l},lK:function(){return o}});var s=t(18),n=t(5143);let l=e=>async a=>{try{let{data:t}=await s.Z.post("/login",{external_id:e.username,password:e.password});t&&(a({type:"auth/login",payload:t.user}),function(e){for(let a in e)localStorage.setItem(a,e[a])}({access_token:t.token}),a(r()))}catch(e){return a({type:"auth/loginError"}),e}},i=e=>async a=>{let{username:t,password:n,newPassword:l}=e;try{await s.Z.post("/change-password",{external_id:t,password:n,newPassword:l},{headers:{Authorization:"Bearer "+localStorage.getItem("access_token")}}),a({type:"auth/changePasswordSuccess"})}catch(e){return a({type:"auth/changePasswordError"}),e}},r=()=>async e=>{let a=localStorage.getItem("access_token"),{data:t}=await s.Z.get("/features",{headers:{Authorization:"Bearer "+a}});t&&e({type:"auth/features",payload:t.features})},c=e=>async a=>{try{let e=localStorage.getItem("access_token"),{data:t}=await s.Z.get("/profile",{headers:{Authorization:"Bearer "+e}});t&&a({type:"auth/login",payload:t})}catch(a){localStorage.removeItem("access_token"),e.push("/auth")}};function d(){return e=>{e({type:"auth/turnOffLoginError"})}}function o(){return e=>{e((0,n.L)("")),e({type:"auth/logout"})}}},5143:function(e,a,t){"use strict";function s(e){return a=>{a({type:"GC/loading-".concat(e?"on":"off")})}}function n(e){return a=>{a({type:"GC/set-route",payload:e})}}t.d(a,{L:function(){return n},c:function(){return s}})},3773:function(e){e.exports={"create-supply-container":"CreateSupply_create-supply-container__r8Fim",content:"CreateSupply_content__QwHWV",form:"CreateSupply_form__n_kbD","form-group":"CreateSupply_form-group__BNQjw",multiline:"CreateSupply_multiline__c5RTS","user-input":"CreateSupply_user-input___S_56","form-barang":"CreateSupply_form-barang__qCwtr","barang-table-container":"CreateSupply_barang-table-container__nfL08","title-container":"CreateSupply_title-container__6araz","back-btn":"CreateSupply_back-btn__f_6Hx","submit-btn-container":"CreateSupply_submit-btn-container__8OFvv","save-btn":"CreateSupply_save-btn__Qs26e"}},7534:function(e){e.exports={"create-transaction-container":"CreateTransaction_create-transaction-container__PI4vB",content:"CreateTransaction_content__zWxlY",form:"CreateTransaction_form__rNBwd","form-group":"CreateTransaction_form-group__s7Iuv",multiline:"CreateTransaction_multiline__DSnyB","user-input":"CreateTransaction_user-input__I7nBF","form-service":"CreateTransaction_form-service__USbq9","form-item":"CreateTransaction_form-item__Km_wX","form-mechanic":"CreateTransaction_form-mechanic__UdFgc",mechanics:"CreateTransaction_mechanics__UIUyC",services:"CreateTransaction_services__VuZkN",items:"CreateTransaction_items__j_Xfd","item-table-container":"CreateTransaction_item-table-container__6Xv1q","table-parent":"CreateTransaction_table-parent__jWXSt","add-item-btn":"CreateTransaction_add-item-btn__YAr48","add-btn-container":"CreateTransaction_add-btn-container__ZGquc","add-btn":"CreateTransaction_add-btn__QCA19",accordion:"CreateTransaction_accordion__iWSZi","accordion-content":"CreateTransaction_accordion-content__SSfYM","title-container":"CreateTransaction_title-container__VtnY5","back-btn":"CreateTransaction_back-btn__aUq6l","submit-btn-container":"CreateTransaction_submit-btn-container__dWNl8","save-btn":"CreateTransaction_save-btn__V_w1R","total-price":"CreateTransaction_total-price__xo5P3",price:"CreateTransaction_price__83HUe","item-detail":"CreateTransaction_item-detail__RpOT5","bg-default":"CreateTransaction_bg-default__q1GeT"}},74:function(e){e.exports={loading:"Global_loading__YsvMj",hide:"Global_hide__QWE2z"}},2150:function(e){e.exports={"insight-container":"Insight_insight-container__4eeaZ","title-container":"Insight_title-container__tNHw_","back-btn":"Insight_back-btn__EXh9s","btn-container":"Insight_btn-container__682iQ","content-container":"Insight_content-container__sdIXm",content:"Insight_content__Ymrf2",selected:"Insight_selected__pQWgY"}},4341:function(e){e.exports={root:"Navbar_root__hAE58",tabs:"Navbar_tabs__ohPKU","primary-color":"Navbar_primary-color__PUYqK","account-tab":"Navbar_account-tab__pLsEZ","account-tab-container":"Navbar_account-tab-container__muRb2","account-setting-btn":"Navbar_account-setting-btn___xmwf","button-tab":"Navbar_button-tab__10mbw","image-container":"Navbar_image-container__YmRVZ"}},2978:function(e){e.exports={root:"RBAC_root__zp0Ji","role-container":"RBAC_role-container__j2z8O","new-role-name":"RBAC_new-role-name__WfHid",role:"RBAC_role__Rsv_H","role-title":"RBAC_role-title__w2iUK",show:"RBAC_show__pvlHB",hide:"RBAC_hide__h2dwz",permissions:"RBAC_permissions__WaYnJ","permission-detail":"RBAC_permission-detail__2R8SS","create-div":"RBAC_create-div__Kxhjd"}}},function(e){e.O(0,[196,957,270,662,288,506,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);